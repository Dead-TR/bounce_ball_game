{"version":3,"sources":["components/Menu/pages/Levels/components/CurrentLevelWindow/style.module.css","components/Menu/pages/MainMenu/style.module.css","components/Greeting/style.module.css","components/Menu/pages/Levels/style.module.css","components/Dialog/style.module.css","components/Menu/pages/Levels/components/PlayWindow/style.module.css","components/BG/style.module.css","containers/App/style.module.css","components/Greeting/config.ts","components/Greeting/assets/phaser.png","components/Greeting/index.tsx","providers/Path/context.tsx","providers/Path/provider.tsx","providers/Path/hook.tsx","utils/createGuard.ts","utils/createListener.ts","assets/play.svg","assets/shop.svg","managers/config.ts","managers/progressManager.ts","components/Menu/pages/MainMenu/index.tsx","components/BG/index.tsx","game/modules/game/settingsConfig.ts","game/modules/game/storyConfig.ts","game/modules/game/circle/preload.ts","game/modules/scenes/assets/dialogs.ts","game/modules/scenes/assets/preloadData.ts","game/modules/scenes/modules/Player.ts","game/modules/scenes/modules/Dialog.ts","game/modules/scenes/modules/Extensions.ts","game/modules/scenes/modules/Level.ts","game/modules/scenes/modules/Interface.ts","game/modules/scenes/Default.ts","game/modules/levels/index.ts","game/modules/levels/_0.ts","game/modules/levels/_1.ts","game/modules/levels/_2.ts","game/modules/levels/_3.ts","assets/close.svg","components/Dialog/index.tsx","webpack:///./src/assets/play.svg?c009","components/Menu/pages/Levels/components/CurrentLevelWindow/index.tsx","game/instance.ts","components/Menu/pages/Levels/components/PlayWindow/index.tsx","components/Menu/routes.tsx","components/Menu/pages/Levels/index.tsx","components/Menu/components/Route/index.tsx","components/Menu/utils.ts","utils/objectIsEmpty.ts","components/Menu/index.tsx","containers/App/index.tsx","index.js"],"names":["module","exports","gratitude","GreetingComponent","onComplete","useState","index","setIndex","wrapper","useRef","img","useEffect","length","ref","className","css","root","src","alt","clsx","animate","onAnimationEnd","e","imgElement","target","classList","remove","setTimeout","old","add","Greeting","isComplete","setIsComplete","defaultValues","page","path","navigate","to","isHavePrevHistory","defaultLocation","hash","key","pathname","search","state","Context","React","createContext","PathProvider","children","useNavigate","location","useLocation","getPath","split","pagePath","setState","setPath","options","Provider","value","usePath","useContext","createGuard","checkedKey","result","createListener","emitter","event","callBack","addListener","removeListener","savesNames","events","ProgressManager","coins","hp","keys","EventEmitter","coinsListener","setCoins","v","localStorage","setItem","JSON","stringify","emit","hpListener","setHP","keysListener","setKey","Array","isArray","push","onFinishListener","onFinishSetter","nextLevelId","listeners","this","onFinish","setters","getters","addCoin","getSavedValues","Number","parse","getItem","error","progressManager","MainMenu","rm","top","center","left","onClick","Shop","Play","right","BG","bg","settingsConfig","delta","width","height","y","buttons","margin","colors","names","text","triggerDebug","animation","ease","duration","storyConfig","tal","NAME","PORTRAIT","preloadData","data","Object","forEach","method","assets","content","load","dialogs","portrait","name","replica","tileSets","gameResourcesData","image","map","spritesheet","frameWidth","frameHeight","endFrame","atlas","tilemapTiledJSON","localName","Player","scene","cursors","playerBody","playerVisual","playerWhite","camera","playerParamsConfig","blockMove","blocked","time","coordinates","x","HP","world","createPlayer","createCamera","createTeleport","playerBounce","layer","getObjectLayer","playerData","objects","physics","sprite","setAlpha","setDepth","Infinity","setBounce","setCircle","collider","body","setCollideWorldBounds","setBounds","widthInPixels","heightInPixels","setCollisionByExclusion","input","keyboard","createCursorKeys","setDefaultCoordinates","id","levelName","storeData","player","cameras","main","smoothMoveCameraTowards","smoothFactor","undefined","scrollX","scrollY","startX","startY","playerSprite","fx","preFX","addDisplacement","createAnchor","particles","speed","min","max","angle","scale","start","end","tint","blendMode","lifespan","rotate","emitting","alpha","Phaser","Math","Easing","Quadratic","InOut","tweens","targets","yoyo","loop","on","setPosition","explode","isBlocked","control","resetBlockMove","controlPlayerBody","velocity","maxXVelocity","startedXVelocity","flyXVelocity","wallJumpXVelocity","wallJumpYVelocity","jumpVelocity","inertia","playerAcceleration","oldVelocityX","isDown","down","none","up","setBlockMove","setVelocityX","setVelocityY","direction","moveBlockTime","canLeftMove","canRightMove","Dialog","sceneId","extensions","activeDialog","sceneDialogs","game","config","sceneWidth","leftBGFrame","setOrigin","rightBGFrame","nextButton","setInteractive","setScrollFactor","skipButton","nextDialog","dialogEnd","nextButtonClick","bind","skipButtonClick","centerBG","tileSprite","container","hideTween","create","repeat","showTween","hide","show","createDialogTriggers","tween","current","once","play","isActive","tweensPlay","dialogId","dialog","createPortrait","createName","createText","showDialog","imgName","firstFrame","list","imgFit","make","origin","style","font","color","wordWrap","useAdvancedWrap","portraitWidth","textMargin","destroy","actualReplicaNumber","valueOfReplica","clearDialog","isSkip","actualReplicaElement","callback","closeDialog","ignoredDialogs","actualSceneIgnored","newActualIgnored","Set","hideDialog","debug","createRectangle","triggerObjects","properties","find","trigger","zone","enable","setAllowGravity","moves","overlap","createConversation","Extensions","maxWidth","maxHeight","widthScale","heightScale","setScale","graphics","fillStyle","fillRect","props","reduce","acm","upLeftX","apply","upLeftY","upRightX","upRightY","maxY","rectWidth","rectHeight","arcadeBodyGuard","Level","invincible","createButtons","createWalls","createCoins","createTraps","createFinish","bridgetButtonsLayer","bridgetButtonsList","textures","get","getFrameNames","defaultButton","pushedButton","i","getPropsFromObject","btnX","btnY","button","invisible","buttonZone","Physics","Arcade","STATIC_BODY","currentKey","foundKey","setTexture","is_wall","activateWall","activateBridge","finishList","texture","finish","anims","frames","frameRate","fireworks","coinsLayer","bridgesList","bridges","block","entries","blocks","findCorners","bridgeBody","setImmovable","setFriction","gameHeight","bridgeSprites","yFromDirection","from_top","bridge","traps","trap","playerModule","white","dead","setInterval","clearTimeout","GameInterface","hpBar","hitId","hitTween","prevHpValue","update","hit","createHPBar","recGraph","generateTexture","setTint","isBlink","clearInterval","percent","console","log","scaleY","DefaultScene","level","interface","visual","restart","call","tilemap","layersTilesets","addTilesetImage","filter","createLayer","Scene","doors","isAvailable","savedLevels","savedLevelsData","_g","levels","isOpen","onClose","curtain","_excluded","_extends","assign","arguments","source","prototype","hasOwnProperty","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgClose","_ref","svgRef","title","titleId","xmlns","viewBox","fill","fillRule","d","_defs","ForwardRef","SvgPlay","cx","cy","r","filterUnits","colorInterpolationFilters","floodOpacity","in","type","values","dx","dy","stdDeviation","in2","operator","mode","CurrentLevelWindow","levelId","onPlay","header","headerContent","close","menu","playBtn","playIcon","isDebug","phaserConfig","AUTO","parent","backgroundColor","default","arcade","gravity","pixelArt","roundPixels","PlayWindow","useLayoutEffect","Game","createGame","routes","component","levelsList","setLevelsList","preparedLevel","setPreparedLevel","playedLevel","setPlayedLevel","showLevelAnimation","setShowLevelAnimation","handleClearLevel","nextLevel","newLevels","disabled","shop","pages","pagesRoutes","createRouteArray","route","currentPath","obj","pathName","redirect","newPath","createRoute","Route","Component","isRedirect","element","Main","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.9d45af52.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"style_root__2zQIZ\",\"header\":\"style_header__1fKoD\",\"headerContent\":\"style_headerContent__Jtrsr\",\"levelName\":\"style_levelName__5L3Jc\",\"close\":\"style_close__3MZIE\",\"menu\":\"style_menu__2CZDy\",\"playBtn\":\"style_playBtn__1fy4f\",\"playIcon\":\"style_playIcon__1DFVJ\",\"top\":\"style_top__1Gazg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"style_root__ikq-d\",\"top\":\"style_top__3Q_7J\",\"coins\":\"style_coins__2ilSs\",\"center\":\"style_center__3hAyG\",\"left\":\"style_left__10Het\",\"right\":\"style_right__1x1gJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"style_root__3QNJJ\",\"img\":\"style_img__2VYCj\",\"animate\":\"style_animate__2mfZ4\",\"show\":\"style_show__2jlGv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"style_root__2U79M\",\"levels\":\"style_levels__2uBU2\",\"button\":\"style_button__2D8PH\",\"disabled\":\"style_disabled__2HoR9\",\"show\":\"style_show__1JEPc\",\"showAnimation\":\"style_showAnimation__u_iyE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialog\":\"style_dialog__2AAzj\",\"curtain\":\"style_curtain__JpRXW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"style_root__5hJtF\",\"game\":\"style_game__h9NEl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bg\":\"style_bg__9u84p\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"style_root__28lIV\"};","import Phaser from \"./assets/phaser.png\";\nimport React from \"./assets/react.png\";\n\nexport const gratitude = [\n  Phaser,\n  // React\n];\n\nexport const gratitudeConfig = {\n  showTime: 5000,\n};\n","export default \"data:image/png;base64,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\"","import { FC, useEffect, useRef, useState } from \"react\";\nimport clsx from \"clsx\";\n\nimport { gratitude } from \"./config\";\nimport css from \"./style.module.css\";\n\ninterface Props {\n  onComplete: () => void;\n}\n\nconst GreetingComponent: FC<Props> = ({ onComplete }) => {\n  const [index, setIndex] = useState(0);\n  const wrapper = useRef<HTMLDivElement>(null);\n\n  const img = gratitude[index];\n\n  useEffect(() => {\n    if (index < gratitude.length) return;\n\n    onComplete();\n  }, [index]);\n\n  if (index >= gratitude.length) return null;\n  return (\n    <div ref={wrapper} className={css.root}>\n      <img\n        src={img}\n        alt=\"logo\"\n        className={clsx(css.img, css.animate)}\n        onAnimationEnd={(e) => {\n          const imgElement = e.target as HTMLImageElement;\n\n          imgElement.classList.remove(css.animate);\n          setTimeout(() => {\n            setIndex((old) => old + 1);\n\n            setTimeout(() => {\n              imgElement.classList.add(css.animate);\n            }, 0);\n          }, 100);\n        }}\n      />\n    </div>\n  );\n};\n\nexport const Greeting = () => {\n  const [isComplete, setIsComplete] = useState(false);\n\n  if (isComplete) return null;\n  return <GreetingComponent onComplete={() => setIsComplete(true)} />;\n};\n","import React from \"react\";\n\nimport { PathContextType } from \"./type\";\n\nconst defaultValues: PathContextType = {\n  page: {\n    path: \"\",\n    navigate: () => {},\n    to: () => {},\n    isHavePrevHistory: false,\n  },\n\n  defaultLocation: {\n    hash: \"\",\n    key: \"\",\n    pathname: \"\",\n    search: \"\",\n    state: {},\n  },\n};\n\nexport const Context = React.createContext<PathContextType>(defaultValues);\n","import React, { FC, useEffect, useState } from \"react\";\nimport {\n  useLocation,\n  useNavigate,\n  NavigateOptions,\n  To,\n  NavigateFunction,\n} from \"react-router\";\n\nimport { Context } from \"./context\";\n\ninterface Props {\n  children?: React.ReactNode;\n}\n\ninterface PathState {\n  pagePath: string;\n}\n\nconst modalSplitter = \"/modal/\";\n\nexport const PathProvider: FC<Props> = ({ children }) => {\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const getPath = () => {\n    const { pathname } = location;\n\n    const [pagePath] = pathname.split(modalSplitter) as [string?];\n\n    return {\n      pagePath: pagePath || \"/\",\n    };\n  };\n\n  const [state, setState] = useState<PathState>({\n    ...getPath(),\n  });\n\n  useEffect(() => {\n    setState((old) => ({\n      ...old,\n      ...getPath(),\n    }));\n  }, [location.pathname]);\n\n  const setPath = (to: To, options?: NavigateOptions) => {\n    if (location.pathname !== to) {\n      if (typeof to === \"string\") {\n        navigate(to, options);\n      } else {\n        if (location.key === \"default\") {\n          navigate(\"/\", options);\n        } else {\n          navigate(to, options);\n        }\n      }\n    }\n  };\n\n  return (\n    <Context.Provider\n      value={{\n        page: {\n          path: state.pagePath,\n          navigate: setPath as NavigateFunction,\n          to: (path) => setPath(path),\n          isHavePrevHistory: location.key !== \"default\",\n        },\n\n        defaultLocation: location,\n      }}>\n      {children}\n    </Context.Provider>\n  );\n};\n","import { useContext } from \"react\";\n\nimport { Context } from \"./context\";\n\nexport const usePath = () => {\n  return useContext(Context);\n};\n","export function createGuard<Type>(checkedKey: string) {\n  return function (value: Type | any): value is Type {\n    if (!value) {\n      return false;\n    }\n\n    //@ts-ignore\n    const result = (value as Type)[checkedKey];\n\n    return !!result || result === 0;\n  };\n}\n\nexport default createGuard;\n","import EventEmitter from \"events\";\n\nexport const createListener = (\n  emitter: EventEmitter,\n  event: string,\n  callBack: (value: any) => void,\n) => {\n  emitter.addListener(event, callBack);\n\n  return () => {\n    emitter.removeListener(event, callBack);\n  };\n};\n","export default __webpack_public_path__ + \"static/media/play.b2bbc7f4.svg\";","export default __webpack_public_path__ + \"static/media/shop.45028d06.svg\";","export const savesNames = {\n  coinStorageAmt: \"coinsAmount\",\n  currentHp: \"currentHp\",\n  keysList: \"keysList\",\n  levels: \"levels\",\n};\n\nexport const events = {\n  CHANGE_COIN_AMT: \"CHANGE_COIN_AMT\",\n  CHANGE_CURRENT_HP: \"CHANGE_CURRENT_HP\",\n  CHANGE_KEYS: \"CHANGE_KEYS\",\n  ON_FINISH: \"ON_FINISH\",\n};\n","import { EventEmitter } from \"events\";\nimport { events, savesNames } from \"./config\";\nimport { createListener } from \"utils\";\nimport { ProgressState } from \"./type\";\n\nclass ProgressManager {\n  constructor() {\n    this.getSavedValues();\n  }\n\n  private state: ProgressState = {\n    coins: 0,\n    hp: 100,\n    keys: [],\n  };\n  private emitter = new EventEmitter();\n\n  private async getSavedValues() {\n    try {\n      const coins =\n        Number(\n          JSON.parse(localStorage.getItem(savesNames.coinStorageAmt) || \"0\"),\n        ) || 0;\n\n      const hp = Number(localStorage.getItem(savesNames.currentHp));\n      const keys = JSON.parse(\n        localStorage.getItem(savesNames.keysList) || \"[]\",\n      ) as ProgressState[\"keys\"];\n\n      if (coins) this.state.coins = coins;\n      if (hp) this.state.hp = hp;\n      if (keys?.length) this.state.keys = keys;\n    } catch (error) {}\n  }\n\n  //#region Listeners\n  private coinsListener = (callBack: (v: number) => void) =>\n    createListener(this.emitter, events.CHANGE_COIN_AMT, callBack);\n  private setCoins = (v: number) => {\n    this.state.coins = v;\n\n    localStorage.setItem(\n      savesNames.coinStorageAmt,\n      JSON.stringify(this.state.coins),\n    );\n    this.emitter.emit(events.CHANGE_COIN_AMT, this.state.coins);\n  };\n  private hpListener = (callBack: (v: number) => void) =>\n    createListener(this.emitter, events.CHANGE_CURRENT_HP, callBack);\n  private setHP = (v: number) => {\n    this.state.hp = v;\n\n    localStorage.setItem(savesNames.currentHp, JSON.stringify(this.state.hp));\n    this.emitter.emit(events.CHANGE_CURRENT_HP, this.state.hp);\n  };\n  private keysListener = (callBack: (v: string[]) => void) =>\n    createListener(this.emitter, events.CHANGE_KEYS, callBack);\n  private setKey = (v: string | string[]) => {\n    if (Array.isArray(v)) {\n      this.state.keys = v;\n    } else {\n      this.state.keys.push(v);\n    }\n\n    localStorage.setItem(savesNames.keysList, JSON.stringify(this.state.keys));\n    this.emitter.emit(events.CHANGE_KEYS, this.state.keys);\n  };\n\n  private onFinishListener = (callBack: (nextLevelId: string) => void) =>\n    createListener(this.emitter, events.ON_FINISH, callBack);\n  private onFinishSetter = (nextLevelId: string) => {\n    this.emitter.emit(events.ON_FINISH, nextLevelId);\n  };\n\n  listeners = {\n    coins: this.coinsListener,\n    keys: this.keysListener,\n    hp: this.hpListener,\n\n    onFinish: this.onFinishListener,\n  } as const;\n  setters = {\n    coins: this.setCoins,\n    keys: this.setKey,\n    hp: this.setHP,\n\n    onFinish: this.onFinishSetter,\n  } as const;\n  getters = {\n    coins: () => this.state.coins,\n    keys: () => this.state.keys,\n    hp: () => this.state.hp,\n  };\n\n  //#endregion Listeners\n  addCoin = () => {\n    this.setCoins(this.state.coins + 1);\n  };\n}\n\nexport const progressManager = new ProgressManager();\n","import React, { FC, useEffect, useState } from \"react\";\n\nimport { BG } from \"components\";\nimport { usePath } from \"providers\";\n\nimport Play from \"assets/play.svg\";\nimport Shop from \"assets/shop.svg\";\n\nimport css from \"./style.module.css\";\nimport { progressManager } from \"managers\";\n\ninterface Props {}\n\nexport const MainMenu: FC<Props> = ({}) => {\n  const { page } = usePath();\n  const [coins, setCoins] = useState(() => progressManager.getters.coins());\n\n  useEffect(() => {\n    const rm = progressManager.listeners.coins((v) => setCoins(v));\n    return () => rm();\n  }, []);\n\n  return (\n    <BG>\n      <div className={css.root}>\n        <div className={css.top}>\n          <span className={css.coins}>\n          Coins: {coins}\n          </span>\n        </div>\n\n        <div className={css.center}>\n          <div className={css.left}>\n            <button onClick={() => page.to(\"shop\")}>\n              <img src={Shop} alt={\"Shop\"} />\n            </button>\n\n            <button onClick={() => page.to(\"play\")}>\n              <img src={Play} alt={\"Play\"} />\n            </button>\n          </div>\n\n          <div className={css.right}></div>\n        </div>\n      </div>\n    </BG>\n  );\n};\n","import React, { FC } from \"react\";\n\nimport css from \"./style.module.css\";\n\ninterface Props {\n  children?: React.ReactNode;\n}\n\nexport const BG: FC<Props> = ({ children }) => {\n  return <div className={css.bg}>{children}</div>;\n};\n","export const settingsConfig = {\n  gravity: 500,\n  maxXVelocity: 800,\n  startedXVelocity: 250,\n  flyXVelocity: 2,\n  jumpVelocity: 300,\n  inertia: 100,\n\n  wallJumpXVelocity: 500,\n  wallJumpYVelocity: 400,\n\n  moveBlockTime: 500, //ms\n  playerBounce: 0.2,\n\n  playerAcceleration: (delta: number) => delta / 2,\n\n  dialogWrapperMoveTime: 800,\n\n  portraits: {\n    width: 150,\n    height: 170,\n    y: 10,\n  },\n  dialog: {\n    buttons: {\n      width: 100,\n      height: 100,\n      margin: {\n        top: 10,\n        right: 15,\n      },\n    },\n    colors: {\n      names: \"red\",\n      text: \"white\",\n    },\n\n    triggerDebug: true,\n  },\n\n  bridges: {\n    animation: {\n      ease: \"Quad.easeInOut\",\n      duration: 1000,\n    },\n  },\n};\n","export const storyConfig = {\n  characters: {\n    tal: {\n      NAME: \"TAL\",\n      PORTRAIT: \"tal\",\n    },\n  },\n};\n","import { Scene } from \"phaser\";\nimport { PreloadTypes } from \"game/type\";\n\nexport function preloadData(this: Scene, data: PreloadTypes) {\n  Object.keys(data).forEach((key) => {\n    const method = key as keyof PreloadTypes;\n    const assets = data[method];\n\n    assets?.forEach((content) => {\n      // @ts-ignore: Unreachable code error\n      const result = this.load[method](...content);\n    });\n  });\n}\n","import { DialogList } from \"game/type\";\nimport { storyConfig } from \"../../game/storyConfig\";\n\nconst { tal } = storyConfig.characters;\n\nexport const dialogs: DialogList = [\n  [\n    {\n      portrait: tal.PORTRAIT,\n      name: tal.NAME,\n      replica: \"Dialog #1\",\n    },\n    {\n      portrait: tal.PORTRAIT,\n      name: tal.NAME,\n      replica: \"Dialog #2\",\n    },\n    {\n      portrait: tal.PORTRAIT,\n      name: tal.NAME,\n      replica:\n        \"Dialog #3 (long): ----------- ############# ---------------------------- +++++++++++++++++++++++++++++++++++ $$$$$$$$$$$$$$$$$$$$ #################### ######################## ##########################\",\n    },\n    {\n      portrait: tal.PORTRAIT,\n      name: tal.NAME,\n      replica: \"Dialog #4\",\n    },\n  ],\n];\n","import { PreloadTypes } from \"game/type\";\nimport { storyConfig } from \"../../game/storyConfig\";\n\nexport const assets = \"assets/\";\n\nconst { tal } = storyConfig.characters;\n\nexport const tileSets = [\"platforms32x32\"];\n\nexport const gameResourcesData: PreloadTypes = {\n  image: [\n    ...(tileSets.map((name) => [\n      name,\n      `${assets}/levelTiles/${name}.png`,\n    ]) as any),\n    [\"playerBody\", assets + \"player/body.png\"],\n    [\"playerVisual\", assets + \"player/ball.png\"],\n    [\"playerWhite\", assets + \"player/ball_white.png\"],\n\n    [\"spark\", assets + \"env/spark.png\"],\n    [\"diplace\", assets + \"noise.png\"],\n\n    [\"dialogCenter\", assets + \"ui/dialog-2.png\"],\n    [\"dialogLeft\", assets + \"ui/dialog-1.png\"],\n    [\"dialogRight\", assets + \"ui/dialog-3.png\"],\n    [\"dialogNextButton\", assets + \"ui/dialog-button-next.png\"],\n    [\"dialogSkipButton\", assets + \"ui/dialog-button-skip.png\"],\n\n    //portraits\n    [tal.PORTRAIT, assets + \"portraits/TAL/portrait.png\"],\n  ],\n  spritesheet: [\n    [\n      \"coin\",\n      assets + \"env/coin.png\",\n      { frameWidth: 32, frameHeight: 32, endFrame: 9 },\n    ],\n  ],\n  atlas: [\n    [\"buttons\", assets + \"buttons.png\", assets + \"buttons.json\"],\n    [\"bridges\", assets + \"bridget.png\", assets + \"bridget.json\"],\n    [\"button\", assets + \"env/button.png\", assets + \"env/button.json\"],\n  ],\n  tilemapTiledJSON: [],\n};\n","import { PlayerParamsConfig } from \"game/type\";\nimport { settingsConfig } from \"../../game\";\nimport DefaultScene from \"../Default\";\nimport { progressManager } from \"managers\";\n\nconst localName = \"coordinates_\";\nexport class Player {\n  cursors?: Phaser.Types.Input.Keyboard.CursorKeys;\n  playerBody!: Phaser.Types.Physics.Arcade.SpriteWithDynamicBody;\n  playerVisual!: Phaser.GameObjects.Sprite;\n  playerWhite!: Phaser.GameObjects.Sprite;\n  camera!: Phaser.Cameras.Scene2D.Camera;\n  playerParamsConfig: PlayerParamsConfig = {\n    blockMove: {\n      left: {\n        blocked: false,\n        time: 0,\n      },\n      right: {\n        blocked: false,\n        time: 0,\n      },\n    },\n  };\n  coordinates = {\n    x: 0,\n    y: 0,\n  };\n  HP = progressManager.getters.hp();\n\n  constructor(scene: DefaultScene) {\n    const { world, map } = scene;\n\n    if (map && world) {\n      this.createPlayer(scene, map, world);\n      this.createCamera(scene, map, this.playerBody);\n    }\n    this.createTeleport(scene, this.playerBody);\n  }\n\n  createPlayer(\n    scene: DefaultScene,\n    map: Phaser.Tilemaps.Tilemap,\n    world: Phaser.Tilemaps.TilemapLayer,\n  ) {\n    const { playerBounce } = settingsConfig;\n    const layer = map.getObjectLayer(\"player\");\n    const playerData = layer?.objects[0];\n\n    this.playerBody = scene.physics.add\n      .sprite(playerData?.x || 0, playerData?.y || 0, \"playerBody\")\n      .setAlpha(0);\n\n    this.playerVisual = scene.add.sprite(\n      this.playerBody.x,\n      this.playerBody.y,\n      \"playerVisual\",\n    );\n    this.playerWhite = scene.add\n      .sprite(this.playerBody.x, this.playerBody.y, \"playerWhite\")\n      .setAlpha(0)\n      .setDepth(Infinity);\n\n    this.playerBody\n      .setBounce(playerBounce)\n      .setCircle(this.playerBody.width / 2);\n    scene.physics.add.collider(this.playerBody, world);\n    this.playerBody.body.setCollideWorldBounds(true);\n    scene.physics.world.setBounds(0, 0, map.widthInPixels, map.heightInPixels);\n    world.setCollisionByExclusion([-1], true);\n\n    this.cursors = scene.input.keyboard?.createCursorKeys();\n\n    const setDefaultCoordinates = () => {\n      this.coordinates = {\n        x: this.playerBody.x || 0,\n        y: this.playerBody.y || 0,\n      };\n    };\n\n    try {\n      const id = scene.levelName;\n      const storeData = localStorage.getItem(`${localName}${id}`);\n      if (!storeData) setDefaultCoordinates();\n      else {\n        const coordinates = JSON.parse(storeData) as Player[\"coordinates\"];\n        this.coordinates = coordinates;\n      }\n    } catch (error) {\n      setDefaultCoordinates();\n    }\n  }\n\n  createCamera(\n    scene: DefaultScene,\n    map: Phaser.Tilemaps.Tilemap,\n    player: Phaser.Types.Physics.Arcade.SpriteWithDynamicBody,\n  ) {\n    this.camera = scene.cameras.main;\n    this.camera.setBounds(0, 0, map.widthInPixels, map.heightInPixels);\n    this.smoothMoveCameraTowards(player);\n  }\n\n  smoothMoveCameraTowards(\n    target: Phaser.Types.Physics.Arcade.SpriteWithDynamicBody | null,\n    smoothFactor?: number,\n  ) {\n    if (this.camera && target) {\n      if (smoothFactor === undefined) {\n        smoothFactor = 0;\n      }\n      this.camera.scrollX =\n        smoothFactor * this.camera.scrollX +\n        (1 - smoothFactor) * (target.x - this.camera.width * 0.5);\n      this.camera.scrollY =\n        smoothFactor * this.camera.scrollY +\n        (1 - smoothFactor) * (target.y - this.camera.height * 0.5);\n    }\n  }\n\n  createTeleport(\n    scene: DefaultScene,\n    player: Phaser.Types.Physics.Arcade.SpriteWithDynamicBody,\n  ) {\n    const { x: startX, y: startY } = this.coordinates;\n    const { width, height } = player;\n\n    const playerSprite = scene.add.sprite(startX, startY, \"playerVisual\");\n    playerSprite.setAlpha(0.5);\n    const fx = playerSprite.preFX?.addDisplacement(\"diplace\", 1, 0.5);\n    const createAnchor = scene.add.particles(0, 0, \"spark\", {\n      speed: { min: 0, max: 100 },\n      angle: { min: 0, max: 360 },\n      scale: { start: 0.7, end: 0 },\n      tint: 0xff00ff,\n      blendMode: \"ADD\",\n      lifespan: 250,\n      rotate: { min: -180, max: 180 },\n      emitting: false,\n    });\n\n    const createTeleport = scene.add.particles(0, 0, \"spark\", {\n      speed: { min: 0, max: 250 },\n      angle: { min: 0, max: 360 },\n      scale: { start: 1.5, end: 0 },\n      alpha: {\n        start: 1,\n        end: 0,\n        ease: Phaser.Math.Easing.Quadratic.InOut,\n      },\n      tint: 0x008489,\n      blendMode: \"ADD\",\n      lifespan: 400,\n      rotate: { min: -180, max: 180 },\n      emitting: false,\n    });\n\n    scene.tweens.add({\n      targets: fx,\n      x: -1,\n      y: 0.25,\n      yoyo: true,\n      loop: -1,\n      duration: 5000,\n      ease: \"sine.inout\",\n    });\n\n    scene.tweens.add({\n      targets: playerSprite,\n      angle: -360,\n      loop: -1,\n      duration: 2000,\n      ease: \"linear\",\n    });\n\n    scene.tweens.add({\n      targets: playerSprite,\n      alpha: 0.25,\n      loop: -1,\n      duration: 3500,\n      yoyo: true,\n      ease: \"sine.inout\",\n    });\n\n    scene.input.keyboard?.on(\"keydown-ENTER\", () => {\n      this.coordinates = {\n        x: player.x || 0,\n        y: player.y || 0,\n      };\n\n      const { x, y } = this.coordinates;\n      playerSprite.setPosition(x, y);\n      createAnchor.explode(100, x, y);\n\n      try {\n        const id = scene.levelName;\n        localStorage.setItem(\n          `${localName}${id}`,\n          JSON.stringify(this.coordinates),\n        );\n      } catch (error) {}\n    });\n\n    scene.input.keyboard?.on(\"keydown-SPACE\", () => {\n      const { x, y } = this.coordinates;\n      if (player) {\n        player.x = x;\n        player.y = y;\n      }\n\n      createTeleport.explode(300, x, y);\n    });\n  }\n\n  update(time: number, delta: number, isBlocked?: boolean) {\n    this.control(delta, time, isBlocked);\n    this.resetBlockMove(time);\n    this.controlPlayerBody(delta);\n    this.smoothMoveCameraTowards(this.playerBody, 0.9);\n\n    const { x, y } = this.playerVisual;\n    this.playerWhite.setPosition(x, y);\n  }\n\n  controlPlayerBody(delta: number) {\n    this.playerVisual.x = this.playerBody.x;\n    this.playerVisual.y = this.playerBody.y;\n\n    if (this.playerBody.body.velocity.x) {\n      this.playerVisual.angle +=\n        delta * 0.003 * this.playerBody.body.velocity.x;\n    }\n  }\n\n  control(delta: number, time: number, isBlocked?: boolean) {\n    const {\n      maxXVelocity,\n      startedXVelocity,\n      flyXVelocity,\n      wallJumpXVelocity,\n      wallJumpYVelocity,\n      jumpVelocity,\n      inertia,\n      playerAcceleration,\n    } = settingsConfig;\n\n    const { velocity } = this.playerBody.body;\n    const oldVelocityX = velocity.x;\n\n    ///---- Left\n    if (\n      this.cursors?.left.isDown &&\n      !this.playerParamsConfig.blockMove.left.blocked &&\n      !isBlocked\n    ) {\n      if (!this.playerBody.body.blocked.none) {\n        if (oldVelocityX === 0) {\n          velocity.x = -startedXVelocity;\n        } else if (oldVelocityX > 0) {\n          velocity.x = oldVelocityX * -1;\n        } else if (velocity.x > maxXVelocity * -1) {\n          velocity.x -= playerAcceleration(delta);\n        } else if (velocity.x >= maxXVelocity * -1) {\n          velocity.x = maxXVelocity * -1;\n        }\n      } else {\n        velocity.x -= flyXVelocity;\n      }\n\n      ///---- Right\n    } else if (\n      this.cursors?.right.isDown &&\n      !this.playerParamsConfig.blockMove.right.blocked &&\n      !isBlocked\n    ) {\n      if (!this.playerBody.body.blocked.none) {\n        if (oldVelocityX === 0) {\n          velocity.x = startedXVelocity;\n        } else if (oldVelocityX < 0) {\n          velocity.x = oldVelocityX * -1;\n        } else if (velocity.x < maxXVelocity) {\n          velocity.x += playerAcceleration(delta);\n        } else if (velocity.x >= maxXVelocity) {\n          velocity.x = maxXVelocity;\n        }\n      } else {\n        velocity.x += flyXVelocity;\n      }\n      ///---- None\n    } else {\n      if (this.playerBody.body.blocked.down) {\n        if (velocity.x > inertia) {\n          velocity.x -= delta * 2;\n        } else if (velocity.x < -inertia) {\n          velocity.x += delta * 2;\n        } else {\n          velocity.x = 0;\n        }\n      }\n    }\n\n    ///---- Up\n    if (this.cursors?.up.isDown && !isBlocked) {\n      if (this.playerBody.body.blocked.left) {\n        this.setBlockMove(\"left\", time);\n        this.playerBody.setVelocityX(Math.max(wallJumpXVelocity, oldVelocityX));\n        this.playerBody.setVelocityY(-wallJumpYVelocity);\n      } else if (this.playerBody.body.blocked.right) {\n        this.setBlockMove(\"right\", time);\n        this.playerBody.setVelocityX(\n          Math.min(-wallJumpXVelocity, oldVelocityX),\n        );\n        this.playerBody.setVelocityY(-wallJumpYVelocity);\n      } else if (this.playerBody.body.blocked.down) {\n        this.playerBody.setVelocityY(-jumpVelocity);\n      }\n    }\n  }\n  setBlockMove(direction: keyof PlayerParamsConfig[\"blockMove\"], time: number) {\n    const { blockMove } = this.playerParamsConfig;\n    blockMove[direction].blocked = true;\n    blockMove[direction].time = time;\n  }\n\n  resetBlockMove(time: number) {\n    const { moveBlockTime } = settingsConfig; //ms\n    const { left, right } = this.playerParamsConfig.blockMove;\n\n    const canLeftMove = time - left.time > moveBlockTime;\n\n    const canRightMove = time - right.time > moveBlockTime;\n\n    if (canLeftMove) {\n      left.blocked = false;\n    }\n\n    if (canRightMove) {\n      right.blocked = false;\n    }\n  }\n}\n","import {\n  ActiveDialog,\n  DialogList,\n  DialogProperties,\n  IgnoredDialogs,\n  Tweens,\n} from \"game/type\";\nimport { Extensions } from \".\";\nimport DefaultScene from \"../Default\";\nimport { settingsConfig } from \"game/modules/game\";\n\nexport class Dialog {\n  scene: DefaultScene;\n  extensions: Extensions;\n\n  wrapper: Phaser.GameObjects.Container;\n  tweens: Tweens;\n\n  activeDialog: ActiveDialog | null = null;\n  sceneDialogs: DialogList;\n  sceneId: number;\n\n  constructor(scene: DefaultScene, dialogs: DialogList, sceneId: number) {\n    this.sceneId = sceneId;\n    this.sceneDialogs = dialogs;\n    this.scene = scene;\n    this.extensions = scene.extensions;\n\n    const { width, height } = scene.game.config;\n    const sceneWidth = Number(width);\n\n    const leftBGFrame = scene.add.sprite(0, 0, \"dialogLeft\").setOrigin(0, 0);\n    const rightBGFrame = scene.add\n      .sprite(sceneWidth, 0, \"dialogRight\")\n      .setOrigin(0, 0);\n    rightBGFrame.setPosition(\n      rightBGFrame.x - rightBGFrame.width,\n      rightBGFrame.y,\n    );\n    const { buttons } = settingsConfig.dialog;\n\n    const nextButton = scene.add\n      .sprite(\n        sceneWidth - buttons.margin.right,\n        buttons.margin.top,\n        \"dialogNextButton\",\n      )\n      .setInteractive()\n      .setScrollFactor(0)\n      .setOrigin(1, 0);\n    const skipButton = scene.add\n      .sprite(\n        sceneWidth - buttons.margin.right,\n        buttons.margin.top * 2 + buttons.height,\n        \"dialogSkipButton\",\n      )\n      .setInteractive()\n      .setScrollFactor(0)\n      .setOrigin(1, 0);\n    // this.extensions.imgFit(nextButton, buttons.width, buttons.height); //fit img to config size\n    // this.extensions.imgFit(skipButton, buttons.width, buttons.height); //fit img to config size\n\n    const { nextDialog, dialogEnd } = this;\n    const nextButtonClick = nextDialog.bind(this);\n    const skipButtonClick = dialogEnd.bind(this, true);\n    nextButton.on(\"pointerup\", nextButtonClick);\n    skipButton.on(\"pointerup\", skipButtonClick);\n\n    const centerBG = scene.add\n      .tileSprite(\n        leftBGFrame.width,\n        0,\n        sceneWidth - leftBGFrame.width - rightBGFrame.width,\n        rightBGFrame.height,\n        \"dialogCenter\",\n      )\n      .setOrigin(0, 0);\n\n    this.wrapper = scene.add\n      .container(0, 0)\n      .add([leftBGFrame, rightBGFrame, centerBG, nextButton, skipButton])\n      .setScrollFactor(0)\n      .setPosition(0, -centerBG.height);\n\n    const hideTween = scene.tweens.create({\n      targets: this.wrapper,\n\n      y: -centerBG.height,\n      ease: \"Quad.easeInOut\",\n      repeat: 0,\n      duration: settingsConfig.dialogWrapperMoveTime,\n    });\n\n    const showTween = scene.tweens.create({\n      targets: this.wrapper,\n      y: 0,\n      ease: \"Quad.easeInOut\",\n      repeat: 0,\n      duration: settingsConfig.dialogWrapperMoveTime,\n    });\n\n    this.tweens = {\n      hide: hideTween,\n      show: showTween,\n    };\n\n    this.createDialogTriggers(scene.map);\n  }\n\n  tweensPlay(\n    tween: Phaser.Tweens.Tween | Phaser.Tweens.Tween[],\n    onComplete?: () => void,\n  ) {\n    let current: Phaser.Tweens.Tween;\n    if (Array.isArray(tween)) current = tween[0];\n    else current = tween;\n    if (onComplete) {\n      current.once(\"complete\", () => {\n        onComplete && onComplete();\n      });\n    }\n    current.play();\n  }\n\n  showDialog(onComplete?: () => void) {\n    if (this.activeDialog) {\n      this.activeDialog.isActive = true;\n    }\n\n    this.tweensPlay(this.tweens.show, onComplete);\n  }\n\n  hideDialog(onComplete?: () => void) {\n    if (this.activeDialog) {\n      this.activeDialog.isActive = false;\n    }\n    this.tweensPlay(this.tweens.hide, onComplete);\n  }\n\n  createConversation(dialogId: number) {\n    const activeDialog = this.sceneDialogs[dialogId];\n    if (activeDialog) {\n      this.activeDialog = {\n        dialog: activeDialog,\n        replica: 0,\n        id: dialogId,\n        objects: {},\n      };\n\n      const { name, portrait, replica } = activeDialog[0];\n      this.createPortrait(portrait);\n      this.createName(name);\n      this.createText(replica);\n\n      this.showDialog();\n    }\n  }\n\n  createPortrait(imgName: string) {\n    const { height, width, y } = settingsConfig.portraits;\n    const firstFrame = this.wrapper.list[0];\n    const portrait = this.scene.add\n      //@ts-ignore\n      .image(firstFrame.width || 25, y, imgName)\n      .setOrigin(0);\n\n    this.extensions.imgFit(portrait, width, height);\n\n    this.wrapper.add(portrait);\n\n    if (this.activeDialog) {\n      this.activeDialog.objects.portrait = portrait;\n    }\n  }\n\n  createName(name: string) {\n    const { height, width } = settingsConfig.portraits;\n\n    const text = this.scene.make.text({\n      x: 0,\n      y: 0,\n      text: name,\n      origin: { x: 0.5, y: 0 },\n      style: {\n        font: \"25px Arial\",\n        color: settingsConfig.dialog.colors.names,\n        wordWrap: {\n          width: width,\n          useAdvancedWrap: true,\n        },\n      },\n    });\n\n    text.x = 25 + width / 2;\n    text.y = height + 30;\n\n    this.wrapper.add(text);\n\n    if (this.activeDialog) {\n      this.activeDialog.objects.name = text;\n    }\n  }\n\n  createText(replica: string) {\n    const { y, width: portraitWidth } = settingsConfig.portraits;\n    const { buttons, colors } = settingsConfig.dialog;\n    const textMargin = 50;\n    const text = this.scene.make.text({\n      x: portraitWidth + textMargin,\n      y: y * 2,\n      text: replica,\n      origin: { x: 0, y: 0 },\n      style: {\n        font: \"bold 25px Arial\",\n        color: colors.text,\n        wordWrap: {\n          width:\n            Number(this.scene.game.config.width) -\n            textMargin * 2 -\n            portraitWidth -\n            buttons.width,\n          useAdvancedWrap: true,\n        },\n      },\n    });\n\n    this.wrapper.add(text);\n\n    if (this.activeDialog) {\n      this.activeDialog.objects.text = text;\n    }\n  }\n\n  clearDialog() {\n    if (this.activeDialog) {\n      const { objects } = this.activeDialog;\n\n      objects.name?.destroy();\n      objects.portrait?.destroy();\n      objects.text?.destroy();\n    }\n  }\n\n  nextDialog() {\n    if (this.activeDialog) {\n      const { dialog, replica } = this.activeDialog;\n      const actualReplicaNumber = replica + 1;\n\n      if (actualReplicaNumber < dialog.length) {\n        const {\n          name,\n          portrait,\n          replica: valueOfReplica,\n        } = dialog[actualReplicaNumber];\n        this.clearDialog();\n\n        this.createPortrait(portrait);\n        this.createName(name);\n        this.createText(valueOfReplica);\n\n        this.activeDialog.replica = actualReplicaNumber;\n      } else {\n        this.dialogEnd();\n      }\n    }\n  }\n\n  dialogEnd(isSkip?: boolean) {\n    if (this.activeDialog) {\n      const { dialog, replica, id: dialogId } = this.activeDialog;\n      const actualReplicaElement = dialog[replica] || dialog[dialog.length - 1];\n      actualReplicaElement.callback && actualReplicaElement.callback();\n      this.closeDialog();\n\n      if (isSkip && (dialogId || dialogId === 0)) {\n        const ignoredDialogs: IgnoredDialogs = JSON.parse(\n          localStorage.getItem(\"ignoredDialogs\") || \"[]\",\n        );\n        const actualSceneIgnored = ignoredDialogs[this.sceneId] || [];\n        actualSceneIgnored.push(dialogId);\n\n        const newActualIgnored = [...new Set(actualSceneIgnored)];\n        ignoredDialogs[this.sceneId] = newActualIgnored;\n\n        localStorage.setItem(\"ignoredDialogs\", JSON.stringify(ignoredDialogs));\n      }\n    }\n  }\n\n  closeDialog() {\n    const { clearDialog } = this;\n    this.hideDialog(clearDialog.bind(this));\n  }\n\n  createTrigger(x: number, y: number, width: number, height: number) {\n    const debug = settingsConfig.dialog.triggerDebug;\n    return this.scene.extensions.createRectangle(\n      x,\n      y,\n      width,\n      height,\n      0x00ff00,\n      debug ? 0.3 : 0,\n    );\n  }\n\n  createDialogTriggers(map: Phaser.Tilemaps.Tilemap | null) {\n    if (map) {\n      const layer = map.getObjectLayer(\"dialogs\");\n      const triggerObjects = layer?.objects;\n\n      triggerObjects?.forEach(\n        ({ x = -100, y = -100, width = 32, height = 32, properties }) => {\n          const props: DialogProperties[] = properties;\n          const dialogId = Number(\n            props.find((value) => value.name === \"id\")?.value,\n          );\n\n          const trigger = this.scene.add.zone(x, y, width, height).setOrigin(0);\n          this.scene.physics.world.enable(trigger);\n          //@ts-ignore\n          trigger.body.setAllowGravity(false);\n\n          //@ts-ignore\n          trigger.body.moves = false;\n\n          const { player } = this.scene;\n          if (player?.playerBody) {\n            this.scene.physics.add.overlap(player.playerBody, trigger, () => {\n              this.createConversation(dialogId);\n              trigger.destroy();\n            });\n          }\n        },\n      );\n    }\n  }\n}\n","import { Scene } from \"phaser\";\n\nimport {\n  ObjectWithCorners,\n  TiledObjectProperties,\n  UnpackedTiledObjectProperties,\n} from \"game/type\";\n\nexport class Extensions {\n  scene: Scene;\n\n  constructor(scene: Scene) {\n    this.scene = scene;\n  }\n\n  imgFit(img: Phaser.GameObjects.Image, maxWidth: number, maxHeight: number) {\n    const widthScale = maxWidth / img.width;\n    const heightScale = maxHeight / img.height;\n\n    const scale = Math.min(widthScale, heightScale, 1);\n\n    img.setScale(scale);\n  }\n\n  createRectangle(\n    x: number,\n    y: number,\n    width: number,\n    height: number,\n    color: number,\n    alpha: number,\n  ) {\n    return this.scene.add\n      .graphics()\n      .fillStyle(color, alpha)\n      .fillRect(x, y, width, height);\n  }\n\n  getPropsFromObject<Return = UnpackedTiledObjectProperties>(\n    props: TiledObjectProperties[],\n  ) {\n    return props.reduce((acm, { name, value }) => {\n      return {\n        ...acm,\n        [name]: value,\n      };\n    }, {} as Return);\n  }\n\n  findCorners(list: ObjectWithCorners[]) {\n    const upLeftX = Math.min.apply(\n      null,\n      list.reduce((acm: number[], { x }) => {\n        acm.push(x);\n        return acm;\n      }, []),\n    );\n    const upLeftY = Math.min.apply(\n      null,\n      list.reduce((acm: number[], { y }) => {\n        acm.push(y);\n        return acm;\n      }, []),\n    );\n\n    const upRightX = Math.max.apply(\n      null,\n      list.reduce((acm: number[], { x, width }) => {\n        acm.push(x + width);\n        return acm;\n      }, []),\n    );\n    const upRightY = Math.max.apply(\n      null,\n      list.reduce((acm: number[], { y, height }) => {\n        acm.push(y + height);\n        return acm;\n      }, []),\n    );\n\n    const maxY = Math.max.apply(\n      null,\n      list.reduce((acm: number[], { y }) => {\n        acm.push(y);\n        return acm;\n      }, []),\n    );\n\n    const rectWidth = upRightX - upLeftX;\n    const rectHeight = upRightY - upLeftY;\n    const x = upLeftX;\n    const y = maxY;\n\n    return {\n      x,\n      y,\n      rectWidth,\n      rectHeight,\n    };\n  }\n}\n","import { createGuard, createTimeouts } from \"utils\";\n\nimport DefaultScene from \"../Default\";\nimport {\n  ButtonProps,\n  BridgetProps,\n  ButtonTexture,\n  LevelState,\n  ObjectWithCorners,\n  FinishProps,\n} from \"game/type\";\nimport { settingsConfig } from \"game/modules/game\";\nimport { progressManager } from \"managers\";\n\nconst arcadeBodyGuard = createGuard<Phaser.Physics.Arcade.Body>(\"setVelocity\");\nconst { duration, ease } = settingsConfig.bridges.animation;\n\nexport class Level {\n  constructor(scene: DefaultScene) {\n    this.scene = scene;\n\n    const map = scene.map;\n    const player = scene.player?.playerBody;\n\n    if (map && player) {\n      this.createButtons(scene, map, player);\n      this.createWalls(scene, map, player);\n      this.createCoins(scene, map, player);\n      this.createTraps(scene, map, player);\n      this.createFinish(scene, map, player);\n    }\n  }\n  private scene: DefaultScene;\n  private state: LevelState = {};\n  overlap = false;\n\n  private createButtons(\n    scene: DefaultScene,\n    map: Phaser.Tilemaps.Tilemap,\n    player: Phaser.Types.Physics.Arcade.SpriteWithDynamicBody,\n  ) {\n    const bridgetButtonsLayer = map.getObjectLayer(\"buttons\");\n    const bridgetButtonsList = bridgetButtonsLayer?.objects;\n\n    const [defaultButton, pushedButton] = scene.textures\n      .get(\"button\")\n      .getFrameNames() as ButtonTexture[];\n\n    bridgetButtonsList?.forEach(\n      ({ x = -100, y = -100, width = -100, height = -100, properties }, i) => {\n        const props: ButtonProps =\n          scene.extensions.getPropsFromObject(properties);\n\n        const btnX = x + width / 2,\n          btnY = y + height;\n        const button = props.invisible\n          ? null\n          : scene.add\n              .sprite(btnX, btnY, \"button\", defaultButton)\n              .setOrigin(0.5, 1);\n\n        const buttonZone = scene.add.zone(x, y, width, height).setOrigin(0, 0);\n        scene.physics.world.enable(\n          buttonZone,\n          Phaser.Physics.Arcade.STATIC_BODY,\n        );\n\n        if (arcadeBodyGuard(buttonZone)) {\n          buttonZone.setAllowGravity(false);\n        }\n\n        scene.physics.add.overlap(player, buttonZone, () => {\n          const currentKey = props.key;\n          const foundKey = progressManager.getters\n            .keys()\n            .find((key) => key === currentKey);\n          if (currentKey && !foundKey) return;\n\n          this.overlap = true;\n          setTimeout(() => {\n            this.overlap = false;\n          }, 5);\n          button?.setTexture(\"button\", pushedButton);\n\n          if (props.is_wall) this.activateWall(scene, map, player, props.id);\n          else this.activateBridge(scene, map, player, props.id);\n          buttonZone.destroy();\n        });\n      },\n    );\n  }\n\n  private createFinish(\n    scene: DefaultScene,\n    map: Phaser.Tilemaps.Tilemap,\n    player: Phaser.Types.Physics.Arcade.SpriteWithDynamicBody,\n  ) {\n    const layer = map.getObjectLayer(\"finish\");\n    const finishList = layer?.objects;\n    const texture = scene.textures.get(\"finish\").getFrameNames();\n\n    finishList?.forEach(\n      ({ x = -100, y = -100, width = -100, height = -100, properties }) => {\n        const props: FinishProps =\n          scene.extensions.getPropsFromObject(properties);\n\n        const finish = scene.add\n          .tileSprite(x, y, width, height, \"buttons\", texture[0])\n          .setOrigin(0, 1);\n        scene.physics.world.enable(finish);\n        if (arcadeBodyGuard(finish.body)) {\n          finish.body.setAllowGravity(false);\n        }\n\n        scene.physics.add.overlap(player, finish, () => {\n          // FINISH HERE\n          const nextLevelId = props.nextLevelId;\n          progressManager.setters.onFinish(nextLevelId);\n        });\n      },\n    );\n  }\n\n  private createCoins(\n    scene: DefaultScene,\n    map: Phaser.Tilemaps.Tilemap,\n    player: Phaser.Types.Physics.Arcade.SpriteWithDynamicBody,\n  ) {\n    scene.anims.create({\n      key: \"coinAnimation\",\n      frames: \"coin\",\n      frameRate: 10,\n      repeat: -1,\n    });\n    const fireworks = scene.add.particles(0, 0, \"spark\", {\n      speed: { min: 0, max: 80 },\n      angle: { min: 0, max: 360 },\n      scale: { start: 0.5, end: 0 },\n      alpha: { start: 0, end: 1 },\n      blendMode: \"ADD\",\n      lifespan: 500,\n      rotate: { min: -180, max: 180 },\n      emitting: false,\n    });\n\n    const coinsLayer = map.getObjectLayer(\"coins\");\n\n    const coins = coinsLayer?.objects.map(({ x = 0, y = 0, width, height }) => {\n      const sprite = scene.add.sprite(x, y, \"coin\", 0).setOrigin(0, 1);\n      sprite.play(\"coinAnimation\");\n\n      this.scene.physics.world.enable(\n        sprite,\n        Phaser.Physics.Arcade.STATIC_BODY,\n      );\n\n      scene.physics.add.overlap(player, sprite, () => {\n        this.overlap = true;\n        setTimeout(() => {\n          this.overlap = false;\n        }, 5);\n\n        const { x, y, width, height } = sprite;\n        fireworks.explode(100, x + width / 2, y - height / 2);\n        sprite.destroy();\n        // ADD +1 COIN HERE\n        progressManager.addCoin();\n      });\n    });\n  }\n\n  private createWalls(\n    scene: DefaultScene,\n    map: Phaser.Tilemaps.Tilemap,\n    player: Phaser.Types.Physics.Arcade.SpriteWithDynamicBody,\n  ) {\n    const layer = map.getObjectLayer(\"walls\");\n    const bridgesList = layer?.objects;\n    const textures = scene.textures.get(\"bridges\").getFrameNames();\n\n    const bridges: Record<\n      string,\n      { sprite: Phaser.GameObjects.TileSprite; props: BridgetProps }[]\n    > = {};\n\n    bridgesList?.forEach(\n      ({ x = -100, y = -100, width = 0, height = 0, properties }, i) => {\n        const props: BridgetProps =\n          scene.extensions.getPropsFromObject(properties);\n\n        if (props.id === undefined) return;\n\n        const block = scene.add\n          .tileSprite(x, y + height, width, height, \"bridges\", textures[0])\n          .setOrigin(0, 1);\n\n        if (!bridges[props.id]) bridges[props.id] = [];\n\n        bridges[props.id].push({ props, sprite: block });\n      },\n    );\n\n    Object.entries(bridges).forEach(([id, blocks]) => {\n      const { x, y, rectWidth, rectHeight } = scene.extensions.findCorners(\n        blocks.map(({ sprite }) => sprite),\n      );\n\n      const bridgeBody = scene.add\n        .zone(x, y, rectWidth, rectHeight)\n        .setOrigin(0, 1);\n      this.scene.physics.world.enable(\n        bridgeBody,\n        Phaser.Physics.Arcade.STATIC_BODY,\n      );\n\n      if (arcadeBodyGuard(bridgeBody.body)) {\n        bridgeBody.body.setAllowGravity(false).setImmovable().setFriction(0, 0);\n        bridgeBody.body.moves = false;\n      }\n      scene.physics.add.collider(player, bridgeBody, () => {});\n\n      this.state[id] = {\n        body: bridgeBody,\n        bridges: blocks,\n      };\n    });\n  }\n\n  private activateBridge(\n    scene: DefaultScene,\n    map: Phaser.Tilemaps.Tilemap,\n    player: Phaser.Types.Physics.Arcade.SpriteWithDynamicBody,\n    id?: string | number,\n  ) {\n    if (id === undefined) {\n      return;\n    }\n\n    const layer = map.getObjectLayer(\"bridges\");\n    const bridgesList = layer?.objects;\n    const textures = scene.textures.get(\"bridges\").getFrameNames();\n\n    const gameHeight = Number(map.heightInPixels);\n    const bridgeSprites: ObjectWithCorners[] = [];\n\n    bridgesList?.forEach(\n      ({ x = -100, y = -100, width = 0, height = 0, properties }, i) => {\n        const props =\n          scene.extensions.getPropsFromObject<BridgetProps>(properties);\n\n        if (props.id === id) {\n          const yFromDirection = props.from_top\n            ? -height * 2\n            : gameHeight + height * 2;\n\n          const bridge = scene.add\n            .tileSprite(\n              x,\n              yFromDirection,\n              width,\n              height,\n              \"bridges\",\n              textures[0],\n            )\n            .setOrigin(0, 0);\n\n          bridgeSprites.push({ ...bridge, y });\n\n          const bridgeAnimation = scene.tweens.add({\n            targets: bridge,\n            y,\n            ease,\n            duration,\n            repeat: 0,\n          });\n        }\n      },\n    );\n\n    setTimeout(() => {\n      const { x, y, rectWidth, rectHeight } =\n        scene.extensions.findCorners(bridgeSprites);\n      const bridgeBody = scene.add\n        .zone(x, y, rectWidth, rectHeight)\n        .setOrigin(0, 0);\n      this.scene.physics.world.enable(\n        bridgeBody,\n        Phaser.Physics.Arcade.STATIC_BODY,\n      );\n\n      if (arcadeBodyGuard(bridgeBody.body)) {\n        bridgeBody.body.setAllowGravity(false).setImmovable().setFriction(0, 0);\n        bridgeBody.body.moves = false;\n      }\n\n      scene.physics.add.collider(player, bridgeBody, () => {});\n    }, duration);\n  }\n  private activateWall(\n    scene: DefaultScene,\n    map: Phaser.Tilemaps.Tilemap,\n    player: Phaser.Types.Physics.Arcade.SpriteWithDynamicBody,\n    id?: string | number,\n  ) {\n    if (!id) return;\n\n    const gameHeight = Number(map.heightInPixels);\n\n    const { body, bridges } = this.state[id];\n\n    body.destroy();\n\n    bridges.forEach(({ props, sprite }) => {\n      const y = props.from_top\n        ? -(sprite.height + 100)\n        : Number(gameHeight) + sprite.height + 100;\n\n      const animation = scene.tweens.add({\n        targets: sprite,\n        y,\n        ease,\n        duration,\n        repeat: 0,\n      });\n    });\n  }\n\n  private invincible = false;\n  private createTraps(\n    scene: DefaultScene,\n    map: Phaser.Tilemaps.Tilemap,\n    player: Phaser.Types.Physics.Arcade.SpriteWithDynamicBody,\n  ) {\n    const layer = map.getObjectLayer(\"traps\");\n    const traps = layer?.objects;\n\n    traps?.forEach(({ x = -100, y = -100, width = 0, height = 0 }) => {\n      const trap = scene.add.zone(x, y, width, height).setOrigin(0, 0);\n      scene.physics.world.enable(trap, Phaser.Physics.Arcade.STATIC_BODY);\n\n      scene.physics.add.overlap(player, trap, () => {\n        player.setAlpha(0);\n        if (!this.invincible) {\n          this.invincible = true;\n          const playerModule = scene.player;\n          const white = scene.player?.playerWhite;\n          if (!white || !playerModule) return;\n\n          playerModule.HP -= 10;\n\n          if (playerModule.HP <= 0) {\n            scene.dead();\n          }\n\n          white.setAlpha(1);\n          let i = 0;\n          const id = setInterval(() => {\n            const alpha = white.alpha === 1 ? 0 : 1;\n            white.setAlpha(alpha);\n            i++;\n            if (i >= 5) {\n              clearTimeout(id);\n              this.invincible = false;\n            }\n          }, 100);\n        }\n      });\n    });\n  }\n}\n","import { progressManager } from \"managers\";\nimport DefaultScene from \"../Default\";\n\nconst config = {\n  x: 5,\n  y: 5,\n  width: 16,\n  height: 100,\n};\n\nexport class GameInterface {\n  constructor(scene: DefaultScene) {\n    this.scene = scene;\n\n    this.prevHpValue = scene.player?.HP || 100;\n    this.createHPBar();\n  }\n  private scene: DefaultScene;\n  private hpBar?: Phaser.GameObjects.Sprite;\n\n  private createHPBar() {\n    const { height, width, x, y } = config;\n    const recGraph = this.scene.add\n      .graphics()\n      .fillStyle(0xffffff)\n      .fillRect(0, 0, width, height);\n    recGraph.generateTexture(\"hpLine\", width, height);\n    recGraph.destroy();\n\n    this.hpBar = this.scene.add\n      .sprite(x, y, \"hpLine\")\n      .setTint(0xff0000)\n      .setOrigin(0, 0)\n      .setScrollFactor(0);\n  }\n\n  private hitId: NodeJS.Timer | null = null;\n  private hitTween?: Phaser.Tweens.Tween;\n  private hit() {\n    let i = 0;\n\n    if (this.hitId === null) {\n      const hp = this.scene.player!.HP;\n      this.hitId = setInterval(() => {\n        const isBlink = !!(i % 2);\n        i++;\n        this.hpBar?.setTint(isBlink ? 0xffffff : 0xff0000);\n        if (i >= 10) {\n          this.hpBar?.setTint(0xff0000);\n          clearInterval(this.hitId!);\n          this.hitId = null;\n\n          this.prevHpValue = hp;\n        }\n      }, 50);\n\n      const percent = hp / progressManager.getters.hp();\n      console.log(\" ~ GameInterface ~ hit ~ percent:\", percent, hp, progressManager.getters.hp())\n\n      const bridgeAnimation = this.scene.tweens.add({\n        targets: this.hpBar,\n        scaleY: percent,\n        ease: \"linear\",\n        duration: 300,\n      });\n    }\n  }\n\n  private prevHpValue = 100;\n  update = () => {\n    if (!this.scene.player) return;\n\n    if (this.scene.player?.HP !== this.prevHpValue) {\n      this.hit();\n    }\n  };\n}\n","import { Scene } from \"phaser\";\n\nimport { preloadData } from \"../game\";\nimport { assets, dialogs, gameResourcesData, tileSets } from \"./assets\";\nimport { Dialog, Extensions, Level, Player, GameInterface } from \"./modules\";\n\nexport default class DefaultScene extends Scene {\n  player: Player | null = null;\n  dialog: Dialog | null = null;\n  level: Level | null = null;\n  interface: GameInterface | null = null;\n  extensions!: Extensions;\n\n  map: Phaser.Tilemaps.Tilemap | null = null;\n  world: Phaser.Tilemaps.TilemapLayer | null = null;\n  visual: Phaser.Tilemaps.TilemapLayer | null = null;\n\n  levelName: string;\n\n  constructor(levelName: string) {\n    super({ key: levelName });\n\n    this.levelName = levelName;\n  }\n\n  preload() {\n    this.extensions = new Extensions(this);\n    preloadData.call(this, {\n      ...gameResourcesData,\n      tilemapTiledJSON: [\n        //@ts-ignore\n        ...gameResourcesData.tilemapTiledJSON,\n        [\"map\", assets + `levels/${this.levelName}.json`],\n      ],\n    });\n  }\n\n  create() {\n    this.map = this.make.tilemap({ key: \"map\" });\n    console.log(\" ~ DefaultScene ~ create ~ this.map:\", this.map);\n    const layersTilesets = tileSets\n      .map((name) => {\n        return this.map?.addTilesetImage(name, name);\n      })\n      .filter((v) => !!v) as Phaser.Tilemaps.Tileset[];\n\n    if (!layersTilesets.length)\n      throw `wrong tileset data: ${JSON.stringify(layersTilesets)}`;\n\n    this.world = this.map.createLayer(\"level\", layersTilesets, 0, 0);\n    this.visual = this.map.createLayer(\"visual\", layersTilesets, 0, 0);\n\n    this.player = new Player(this);\n    this.dialog = new Dialog(this, dialogs, 0);\n    this.level = new Level(this);\n    this.interface = new GameInterface(this);\n  }\n\n  private restart = false;\n  dead() {\n    if (this.restart) return;\n\n    this.restart = true;\n    this.tweens.add({\n      targets: this.cameras.main,\n      alpha: 0,\n      duration: 500,\n      onComplete: () => {\n        setTimeout(() => {\n          this.restart = false;\n          this.scene.restart();\n        }, 500);\n      },\n    });\n  }\n\n  update(time: number, delta: number) {\n    this.player?.update(\n      time,\n      delta,\n      this.dialog?.activeDialog?.isActive ||\n        this.level?.overlap ||\n        this.restart,\n    );\n\n    this.interface?.update();\n  }\n}\n","import { savesNames } from \"managers/config\";\nimport { Level_0 } from \"./_0\";\nimport { Level_1 } from \"./_1\";\nimport { Level_2 } from \"./_2\";\nimport { Level_3 } from \"./_3\";\nimport { MenuLevelState } from \"./type\";\n\nconst list: MenuLevelState[] = [\n  {\n    level: Level_0,\n    name: \"0\",\n    doors: 1,\n    isAvailable: true,\n    id: \"0\",\n  },\n  { level: Level_1, name: \"1\", doors: 1, id: \"1\" },\n  { level: Level_2, name: \"2\", doors: 2, id: \"2\" },\n  { level: Level_3, name: \"3\", doors: 3, id: \"3\" },\n];\n\ntry {\n  const savedLevels = localStorage.getItem(savesNames.levels);\n\n  if (savedLevels) {\n    const parsedLevels = JSON.parse(savedLevels) as MenuLevelState[];\n    const savedLevelsData = parsedLevels.reduce(\n      (acm, { name, isAvailable }) => {\n        acm[name] = !!isAvailable;\n        return acm;\n      },\n      {} as Record<string, boolean>,\n    );\n\n    list.forEach((level) => {\n      if (savedLevelsData[level.name]) {\n        level.isAvailable = savedLevelsData[level.name];\n      }\n    });\n  }\n} catch (error) {\n  console.error(\"2\", error);\n}\n\nexport const levels = list;\n","import DefaultScene from \"../scenes/Default\";\n\nexport class Level_0 extends DefaultScene {\n  constructor() {\n    super(\"ex_0\");\n  }\n}\n","import DefaultScene from \"../scenes/Default\";\n\nexport class Level_1 extends DefaultScene {\n  constructor() {\n    super(\"ex_1\");\n  }\n}\n","import DefaultScene from \"../scenes/Default\";\n\nexport class Level_2 extends DefaultScene {\n  constructor() {\n    super(\"ex_2\");\n  }\n}\n","import DefaultScene from \"../scenes/Default\";\n\nexport class Level_3 extends DefaultScene {\n  constructor() {\n    super(\"ex_3\");\n  }\n}\n","var _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgClose(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"1em\",\n    height: \"1em\",\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    fill: \"none\",\n    fillRule: \"evenodd\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M24 0v24H0V0zM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035c-.01-.004-.019-.001-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427c-.002-.01-.009-.017-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093c.012.004.023 0 .029-.008l.004-.014l-.034-.614c-.003-.012-.01-.02-.02-.022m-.715.002a.023.023 0 0 0-.027.006l-.006.014l-.034.614c0 .012.007.02.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"m12 14.122l5.303 5.303a1.5 1.5 0 0 0 2.122-2.122L14.12 12l5.304-5.303a1.5 1.5 0 1 0-2.122-2.121L12 9.879L6.697 4.576a1.5 1.5 0 1 0-2.122 2.12L9.88 12l-5.304 5.304a1.5 1.5 0 1 0 2.122 2.12z\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgClose);\nexport default __webpack_public_path__ + \"static/media/close.0dc66dd0.svg\";\nexport { ForwardRef as ReactComponent };","import React, { FC } from \"react\";\n\nimport css from \"./style.module.css\";\n\ninterface Props {\n  children?: React.ReactNode;\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nexport const Dialog: FC<Props> = ({ children, isOpen, onClose }) => {\n  if (!isOpen) return null;\n  return (\n    <div className={css.dialog}>\n      <div className={css.curtain} onClick={onClose} />\n        {children}\n    </div>\n  );\n};\n","var _g, _defs;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgPlay(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 163,\n    height: 163,\n    viewBox: \"0 0 163 163\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    filter: \"url(#filter0_d_3_168)\"\n  }, /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 76.5,\n    cy: 76.5,\n    r: 75.5,\n    fill: \"#89B8AE\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M102.3 61.563C112.994 67.9355 113.437 83.2622 103.13 90.2425L79.5289 106.226C68.4242 113.746 53.3916 106.048 53.0036 92.6416L52.1187 62.0669C51.7307 48.661 66.293 40.106 77.8141 46.9715L102.3 61.563Z\",\n    fill: \"white\"\n  }))), _defs || (_defs = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"filter\", {\n    id: \"filter0_d_3_168\",\n    x: 0,\n    y: 0,\n    width: 163,\n    height: 163,\n    filterUnits: \"userSpaceOnUse\",\n    colorInterpolationFilters: \"sRGB\"\n  }, /*#__PURE__*/React.createElement(\"feFlood\", {\n    floodOpacity: 0,\n    result: \"BackgroundImageFix\"\n  }), /*#__PURE__*/React.createElement(\"feColorMatrix\", {\n    in: \"SourceAlpha\",\n    type: \"matrix\",\n    values: \"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\",\n    result: \"hardAlpha\"\n  }), /*#__PURE__*/React.createElement(\"feOffset\", {\n    dx: 5,\n    dy: 5\n  }), /*#__PURE__*/React.createElement(\"feGaussianBlur\", {\n    stdDeviation: 3\n  }), /*#__PURE__*/React.createElement(\"feComposite\", {\n    in2: \"hardAlpha\",\n    operator: \"out\"\n  }), /*#__PURE__*/React.createElement(\"feColorMatrix\", {\n    type: \"matrix\",\n    values: \"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.61 0\"\n  }), /*#__PURE__*/React.createElement(\"feBlend\", {\n    mode: \"normal\",\n    in2: \"BackgroundImageFix\",\n    result: \"effect1_dropShadow_3_168\"\n  }), /*#__PURE__*/React.createElement(\"feBlend\", {\n    mode: \"normal\",\n    in: \"SourceGraphic\",\n    in2: \"effect1_dropShadow_3_168\",\n    result: \"shape\"\n  })))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgPlay);\nexport default __webpack_public_path__ + \"static/media/play.b2bbc7f4.svg\";\nexport { ForwardRef as ReactComponent };","import React, { FC } from \"react\";\n\nimport { ReactComponent as Close } from \"assets/close.svg\";\nimport { ReactComponent as Play } from \"assets/play.svg\";\n\nimport css from \"./style.module.css\";\n\ninterface Props {\n  onClose: () => void;\n  levelId: string;\n  doors: number;\n\n  onPlay: () => void;\n}\n\nexport const CurrentLevelWindow: FC<Props> = ({\n  onClose,\n  levelId,\n  doors,\n  onPlay,\n}) => {\n  return (\n    <div className={css.root}>\n      <div className={css.header}>\n        <div className={css.headerContent}>\n          <button className={css.close} onClick={onClose}>\n            <Close />\n          </button>\n          <span className={css.levelName}>: {levelId}</span>\n        </div>\n      </div>\n\n      <div className={css.menu}>\n        <div className={css.top}>: {doors}</div>\n        <button className={css.playBtn} onClick={onPlay}>\n          <Play className={css.playIcon} />\n        </button>\n      </div>\n    </div>\n  );\n};\n","import Phaser from \"phaser\";\n\nimport { OnFinishState } from \"./modules/levels/type\";\nimport DefaultScene from \"./modules/scenes/Default\";\nimport { settingsConfig } from \"./modules\";\n\nconst isDebug = !!localStorage.getItem(\"debug\");\n\nconst phaserConfig: Phaser.Types.Core.GameConfig = {\n  type: Phaser.AUTO,\n  parent: \"game-box\",\n  height: 720,\n  width: 1280,\n  // scene: Level,\n  backgroundColor: 0x14003b,\n  physics: {\n    default: \"arcade\",\n    arcade: {\n      gravity: { y: settingsConfig.gravity },\n      debug: isDebug,\n    },\n  },\n  pixelArt: true,\n  roundPixels: true,\n};\n\nexport const createGame = (\n  level: typeof DefaultScene,\n) => {\n\n  const config = {\n    ...phaserConfig,\n    scene: level,\n  };\n\n  return new Phaser.Game(config);\n};\n","import React, { FC, useLayoutEffect } from \"react\";\nimport { MenuLevelState, createGame } from \"game\";\n\nimport css from \"./style.module.css\";\n\ninterface Props {\n  level: MenuLevelState;\n}\n\n\nexport const PlayWindow: FC<Props> = ({ level }) => {\n  useLayoutEffect(() => {\n    const { level: LevelScene } = level;\n    const game = createGame(LevelScene);\n\n    return () => {\n      game.destroy(true);\n    };\n  }, [level]);\n\n  return (\n    <div className={css.root}>\n      <div className={css.game} id=\"game-box\" />\n    </div>\n  );\n};\n","import { MainMenu, Levels } from \"./pages\";\n\nimport { ExtendedPage } from \"./type\";\n\nconst setGame = (data: ExtendedPage) => data;\n\nexport const routes = {\n  \"/\": setGame({\n    data: {\n      component: MainMenu,\n    },\n  }),\n  play: setGame({\n    data: {\n      component: Levels,\n    },\n  }),\n  shop: setGame({\n    data: {\n      component: MainMenu,\n    },\n  }),\n\n  \"*\": setGame({\n    data: {\n      component: MainMenu,\n    },\n  }),\n} as const;\n\nexport type PathList = keyof typeof routes;\n","import React, { FC, useEffect, useState } from \"react\";\n\nimport { BG } from \"components/BG\";\nimport css from \"./style.module.css\";\nimport { levels } from \"game/modules/levels\";\nimport { MenuLevelState } from \"game/modules/levels/type\";\nimport { Dialog } from \"components/Dialog\";\nimport { CurrentLevelWindow } from \"./components\";\nimport { PlayWindow } from \"./components/PlayWindow\";\nimport { savesNames } from \"managers/config\";\nimport clsx from \"clsx\";\nimport { progressManager } from \"managers\";\n\ninterface Props {}\n\nexport const Levels: FC<Props> = ({}) => {\n  const [levelsList, setLevelsList] = useState(levels);\n  const [preparedLevel, setPreparedLevel] = useState<null | MenuLevelState>(\n    null,\n  );\n  const [playedLevel, setPlayedLevel] = useState<null | MenuLevelState>(null);\n  const [showLevelAnimation, setShowLevelAnimation] = useState<string | number>(\n    -1,\n  );\n\n  const handleClearLevel = () => {\n    setPreparedLevel(null);\n  };\n\n  useEffect(() => {\n    const rm = progressManager.listeners.onFinish((id) => {\n      let nextLevel: string | number = \"\";\n      const newLevels = levels.map((level) => {\n        if (level.id === id) {\n          level.isAvailable = true;\n          nextLevel = level.id;\n        }\n        return level;\n      });\n\n      try {\n        localStorage.setItem(savesNames.levels, JSON.stringify(newLevels));\n      } catch (error) {\n        console.error(\"1\", error);\n      }\n\n      setLevelsList(newLevels);\n      if (nextLevel) setShowLevelAnimation(nextLevel);\n\n      setPlayedLevel(null);\n    });\n\n    return () => {\n      rm();\n    };\n  }, []);\n\n  return (\n    <BG>\n      <div className={css.root}>\n        <div className={css.levels}>\n          {levelsList.map((state) => {\n            const { level, name, id, isAvailable } = state;\n            return (\n              <button\n                key={name + id}\n                className={clsx(\n                  css.button,\n                  !isAvailable && css.disabled,\n                  id === showLevelAnimation && css.show,\n                )}\n                onClick={() => {\n                  setPreparedLevel(state);\n                }}\n                onAnimationEnd={() => {\n                  if (id === showLevelAnimation) {\n                    setPreparedLevel(state);\n                  }\n                }}>\n                {name}\n              </button>\n            );\n          })}\n        </div>\n      </div>\n\n      <Dialog isOpen={!!preparedLevel} onClose={handleClearLevel}>\n        <CurrentLevelWindow\n          onClose={handleClearLevel}\n          levelId={preparedLevel?.name || \"\"}\n          doors={1}\n          onPlay={() => {\n            setPlayedLevel(preparedLevel);\n            handleClearLevel();\n          }}\n        />\n      </Dialog>\n\n      <Dialog isOpen={!!playedLevel} onClose={() => {}}>\n        <PlayWindow level={playedLevel!} />\n      </Dialog>\n    </BG>\n  );\n};\n","import React, { FC } from \"react\";\nimport { Routes as Switch, Route as Nav, Navigate } from \"react-router\";\n\nimport { usePath } from \"providers\";\nimport { createRoute } from \"components/Menu/utils\";\n\nconst { pages } = createRoute();\n\ninterface Props {\n  children?: React.ReactNode;\n}\nexport const Route: FC<Props> = ({}) => {\n  const { page } = usePath();\n  return (\n    <>\n      <Switch location={page.path}>\n        {pages.map(({ pathName, data }, i) => {\n          const { component: Component, redirect } = data;\n\n          const isRedirect = !Component || redirect;\n\n          return (\n            <Nav\n              key={`routes/${pathName}_${i}`}\n              path={pathName}\n              element={\n                !isRedirect ? <Component /> : <Navigate to={redirect || \"/\"} />\n              }\n            />\n          );\n        })}\n      </Switch>\n    </>\n  );\n};\n","import { objectIsEmpty } from \"utils\";\nimport { ExtendedPage, PageData, PagesRoute } from \"./type\";\nimport { routes } from \"./routes\";\n\nexport const createRoute = () => {\n  const pagesRoutes: { pathName: string; data: PageData }[] = [];\n\n  const createRouteArray = (\n    route: PagesRoute | ExtendedPage,\n    currentPath: string,\n  ) => {\n    Object.entries(route).forEach(([pathName, content]) => {\n      if (content.data) {\n        pagesRoutes.push({\n          pathName: currentPath + pathName,\n          data: { ...content.data } as PageData,\n        });\n      }\n\n      if (!objectIsEmpty(content) && !content.component && !content.redirect) {\n        const newPath = currentPath + pathName;\n\n        createRouteArray(\n          content,\n          newPath + (newPath[newPath.length - 1] !== \"/\" ? \"/\" : \"\"),\n        );\n      }\n    });\n  };\n\n  createRouteArray(routes, \"\");\n\n  return {\n    pages: pagesRoutes,\n  };\n};\n","export const objectIsEmpty = (obj: Record<string, any>) =>\n  Object.keys(obj).length === 0;\n","import React, { FC } from \"react\";\n\nimport { PathProvider } from \"providers\";\n\nimport { Route } from \"./components\";\nimport css from \"./style.module.css\";\n\ninterface Props {}\n\nexport const Main: FC<Props> = ({}) => {\n  return (\n    <>\n      <PathProvider>\n        <Route />\n      </PathProvider>\n    </>\n  );\n};\n\nexport * from \"./routes\";\n","import { BrowserRouter } from \"react-router-dom\";\nimport { Greeting, Main } from \"components\";\n\nimport css from \"./style.module.css\";\n\nfunction App() {\n  return (\n    <BrowserRouter>\n      <div className={css.root}>\n        <Greeting />\n        <Main />\n      </div>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport { App } from \"./containers\";\nimport \"./index.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}