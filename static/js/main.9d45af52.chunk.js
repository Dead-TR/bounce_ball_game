(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{14:function(e,t,i){e.exports={root:"style_root__2zQIZ",header:"style_header__1fKoD",headerContent:"style_headerContent__Jtrsr",levelName:"style_levelName__5L3Jc",close:"style_close__3MZIE",menu:"style_menu__2CZDy",playBtn:"style_playBtn__1fy4f",playIcon:"style_playIcon__1DFVJ",top:"style_top__1Gazg"}},17:function(e,t,i){e.exports={root:"style_root__ikq-d",top:"style_top__3Q_7J",coins:"style_coins__2ilSs",center:"style_center__3hAyG",left:"style_left__10Het",right:"style_right__1x1gJ"}},19:function(e,t,i){e.exports={root:"style_root__3QNJJ",img:"style_img__2VYCj",animate:"style_animate__2mfZ4",show:"style_show__2jlGv"}},20:function(e,t,i){e.exports={root:"style_root__2U79M",levels:"style_levels__2uBU2",button:"style_button__2D8PH",disabled:"style_disabled__2HoR9",show:"style_show__1JEPc",showAnimation:"style_showAnimation__u_iyE"}},31:function(e,t,i){e.exports={dialog:"style_dialog__2AAzj",curtain:"style_curtain__JpRXW"}},32:function(e,t,i){e.exports={root:"style_root__5hJtF",game:"style_game__h9NEl"}},34:function(e,t,i){e.exports={bg:"style_bg__9u84p"}},35:function(e,t,i){e.exports={root:"style_root__28lIV"}},45:function(e,t,i){},46:function(e,t,i){"use strict";i.r(t);var a=i(0),n=i.n(a),s=i(24),r=i.n(s),o=i(36),l=i(4),c=i(27),d=["data:image/png;base64,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"],h=i(19),u=i.n(h),p=i(3),v=function(e){var t=e.onComplete,i=Object(a.useState)(0),n=Object(l.a)(i,2),s=n[0],r=n[1],o=Object(a.useRef)(null),h=d[s];return Object(a.useEffect)((function(){s<d.length||t()}),[s]),s>=d.length?null:Object(p.jsx)("div",{ref:o,className:u.a.root,children:Object(p.jsx)("img",{src:h,alt:"logo",className:Object(c.a)(u.a.img,u.a.animate),onAnimationEnd:function(e){var t=e.target;t.classList.remove(u.a.animate),setTimeout((function(){r((function(e){return e+1})),setTimeout((function(){t.classList.add(u.a.animate)}),0)}),100)}})})},y=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),i=t[0],n=t[1];return i?null:Object(p.jsx)(v,{onComplete:function(){return n(!0)}})},g=i(16),f=i(11),b=i(2),m={page:{path:"",navigate:function(){},to:function(){},isHavePrevHistory:!1},defaultLocation:{hash:"",key:"",pathname:"",search:"",state:{}}},j=n.a.createContext(m),O=function(e){var t=e.children,i=Object(b.p)(),n=Object(b.n)(),s=function(){var e=n.pathname.split("/modal/");return{pagePath:Object(l.a)(e,1)[0]||"/"}},r=Object(a.useState)(Object(f.a)({},s())),o=Object(l.a)(r,2),c=o[0],d=o[1];Object(a.useEffect)((function(){d((function(e){return Object(f.a)(Object(f.a)({},e),s())}))}),[n.pathname]);var h=function(e,t){n.pathname!==e&&("string"===typeof e?i(e,t):"default"===n.key?i("/",t):i(e,t))};return Object(p.jsx)(j.Provider,{value:{page:{path:c.pagePath,navigate:h,to:function(e){return h(e)},isHavePrevHistory:"default"!==n.key},defaultLocation:n},children:t})},x=function(){return Object(a.useContext)(j)};function w(e){return function(t){if(!t)return!1;var i=t[e];return!!i||0===i}}var k=function(e,t,i){return e.addListener(t,i),function(){e.removeListener(t,i)}},B=i.p+"static/media/play.b2bbc7f4.svg",D=i.p+"static/media/shop.45028d06.svg",N=i(17),A=i.n(N),T=i(5),C=i.n(T),E=i(8),P=i(6),I=i(10),G=i(33),H="coinsAmount",S="currentHp",L="keysList",J="levels",Y="CHANGE_COIN_AMT",R="CHANGE_CURRENT_HP",_="CHANGE_KEYS",F="ON_FINISH",M=function(){function e(){var t=this;Object(P.a)(this,e),this.state={coins:0,hp:100,keys:[]},this.emitter=new G.EventEmitter,this.coinsListener=function(e){return k(t.emitter,Y,e)},this.setCoins=function(e){t.state.coins=e,localStorage.setItem(H,JSON.stringify(t.state.coins)),t.emitter.emit(Y,t.state.coins)},this.hpListener=function(e){return k(t.emitter,R,e)},this.setHP=function(e){t.state.hp=e,localStorage.setItem(S,JSON.stringify(t.state.hp)),t.emitter.emit(R,t.state.hp)},this.keysListener=function(e){return k(t.emitter,_,e)},this.setKey=function(e){Array.isArray(e)?t.state.keys=e:t.state.keys.push(e),localStorage.setItem(L,JSON.stringify(t.state.keys)),t.emitter.emit(_,t.state.keys)},this.onFinishListener=function(e){return k(t.emitter,F,e)},this.onFinishSetter=function(e){t.emitter.emit(F,e)},this.listeners={coins:this.coinsListener,keys:this.keysListener,hp:this.hpListener,onFinish:this.onFinishListener},this.setters={coins:this.setCoins,keys:this.setKey,hp:this.setHP,onFinish:this.onFinishSetter},this.getters={coins:function(){return t.state.coins},keys:function(){return t.state.keys},hp:function(){return t.state.hp}},this.addCoin=function(){t.setCoins(t.state.coins+1)},this.getSavedValues()}return Object(I.a)(e,[{key:"getSavedValues",value:function(){var e=Object(E.a)(C.a.mark((function e(){var t,i,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t=Number(JSON.parse(localStorage.getItem(H)||"0"))||0,i=Number(localStorage.getItem(S)),a=JSON.parse(localStorage.getItem(L)||"[]"),t&&(this.state.coins=t),i&&(this.state.hp=i),(null===a||void 0===a?void 0:a.length)&&(this.state.keys=a)}catch(n){}case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),z=new M,W=function(e){Object(g.a)(e);var t=x().page,i=Object(a.useState)((function(){return z.getters.coins()})),n=Object(l.a)(i,2),s=n[0],r=n[1];return Object(a.useEffect)((function(){var e=z.listeners.coins((function(e){return r(e)}));return function(){return e()}}),[]),Object(p.jsx)(Z,{children:Object(p.jsxs)("div",{className:A.a.root,children:[Object(p.jsx)("div",{className:A.a.top,children:Object(p.jsxs)("span",{className:A.a.coins,children:["Coins: ",s]})}),Object(p.jsxs)("div",{className:A.a.center,children:[Object(p.jsxs)("div",{className:A.a.left,children:[Object(p.jsx)("button",{onClick:function(){return t.to("shop")},children:Object(p.jsx)("img",{src:D,alt:"Shop"})}),Object(p.jsx)("button",{onClick:function(){return t.to("play")},children:Object(p.jsx)("img",{src:B,alt:"Play"})})]}),Object(p.jsx)("div",{className:A.a.right})]})]})})},Q=i(34),V=i.n(Q),Z=function(e){var t=e.children;return Object(p.jsx)("div",{className:V.a.bg,children:t})},X=i(20),U=i.n(X),K=i(12),q=i(13),$=i(9),ee=i(23),te=i.n(ee),ie=500,ae=800,ne=250,se=2,re=300,oe=100,le=500,ce=400,de=500,he=.2,ue=function(e){return e/2},pe=800,ve={width:150,height:170,y:10},ye={buttons:{width:100,height:100,margin:{top:10,right:15}},colors:{names:"red",text:"white"},triggerDebug:!0},ge={animation:{ease:"Quad.easeInOut",duration:1e3}},fe={tal:{NAME:"TAL",PORTRAIT:"tal"}};function be(e){var t=this;Object.keys(e).forEach((function(i){var a=i,n=e[a];null===n||void 0===n||n.forEach((function(e){var i;(i=t.load)[a].apply(i,Object($.a)(e))}))}))}var me=fe.tal,je=[[{portrait:me.PORTRAIT,name:me.NAME,replica:"Dialog #1"},{portrait:me.PORTRAIT,name:me.NAME,replica:"Dialog #2"},{portrait:me.PORTRAIT,name:me.NAME,replica:"Dialog #3 (long): ----------- ############# ---------------------------- +++++++++++++++++++++++++++++++++++ $$$$$$$$$$$$$$$$$$$$ #################### ######################## ##########################"},{portrait:me.PORTRAIT,name:me.NAME,replica:"Dialog #4"}]],Oe="assets/",xe=fe.tal,we=["platforms32x32"],ke={image:[].concat(Object($.a)(we.map((function(e){return[e,"".concat(Oe,"/levelTiles/").concat(e,".png")]}))),[["playerBody","assets/player/body.png"],["playerVisual","assets/player/ball.png"],["playerWhite","assets/player/ball_white.png"],["spark","assets/env/spark.png"],["diplace","assets/noise.png"],["dialogCenter","assets/ui/dialog-2.png"],["dialogLeft","assets/ui/dialog-1.png"],["dialogRight","assets/ui/dialog-3.png"],["dialogNextButton","assets/ui/dialog-button-next.png"],["dialogSkipButton","assets/ui/dialog-button-skip.png"],[xe.PORTRAIT,"assets/portraits/TAL/portrait.png"]]),spritesheet:[["coin","assets/env/coin.png",{frameWidth:32,frameHeight:32,endFrame:9}]],atlas:[["buttons","assets/buttons.png","assets/buttons.json"],["bridges","assets/bridget.png","assets/bridget.json"],["button","assets/env/button.png","assets/env/button.json"]],tilemapTiledJSON:[]},Be="coordinates_",De=function(){function e(t){Object(P.a)(this,e),this.cursors=void 0,this.playerBody=void 0,this.playerVisual=void 0,this.playerWhite=void 0,this.camera=void 0,this.playerParamsConfig={blockMove:{left:{blocked:!1,time:0},right:{blocked:!1,time:0}}},this.coordinates={x:0,y:0},this.HP=z.getters.hp();var i=t.world,a=t.map;a&&i&&(this.createPlayer(t,a,i),this.createCamera(t,a,this.playerBody)),this.createTeleport(t,this.playerBody)}return Object(I.a)(e,[{key:"createPlayer",value:function(e,t,i){var a,n=this,s=he,r=t.getObjectLayer("player"),o=null===r||void 0===r?void 0:r.objects[0];this.playerBody=e.physics.add.sprite((null===o||void 0===o?void 0:o.x)||0,(null===o||void 0===o?void 0:o.y)||0,"playerBody").setAlpha(0),this.playerVisual=e.add.sprite(this.playerBody.x,this.playerBody.y,"playerVisual"),this.playerWhite=e.add.sprite(this.playerBody.x,this.playerBody.y,"playerWhite").setAlpha(0).setDepth(1/0),this.playerBody.setBounce(s).setCircle(this.playerBody.width/2),e.physics.add.collider(this.playerBody,i),this.playerBody.body.setCollideWorldBounds(!0),e.physics.world.setBounds(0,0,t.widthInPixels,t.heightInPixels),i.setCollisionByExclusion([-1],!0),this.cursors=null===(a=e.input.keyboard)||void 0===a?void 0:a.createCursorKeys();var l=function(){n.coordinates={x:n.playerBody.x||0,y:n.playerBody.y||0}};try{var c=e.levelName,d=localStorage.getItem("".concat(Be).concat(c));if(d){var h=JSON.parse(d);this.coordinates=h}else l()}catch(u){l()}}},{key:"createCamera",value:function(e,t,i){this.camera=e.cameras.main,this.camera.setBounds(0,0,t.widthInPixels,t.heightInPixels),this.smoothMoveCameraTowards(i)}},{key:"smoothMoveCameraTowards",value:function(e,t){this.camera&&e&&(void 0===t&&(t=0),this.camera.scrollX=t*this.camera.scrollX+(1-t)*(e.x-.5*this.camera.width),this.camera.scrollY=t*this.camera.scrollY+(1-t)*(e.y-.5*this.camera.height))}},{key:"createTeleport",value:function(e,t){var i,a,n,s=this,r=this.coordinates,o=r.x,l=r.y,c=(t.width,t.height,e.add.sprite(o,l,"playerVisual"));c.setAlpha(.5);var d=null===(i=c.preFX)||void 0===i?void 0:i.addDisplacement("diplace",1,.5),h=e.add.particles(0,0,"spark",{speed:{min:0,max:100},angle:{min:0,max:360},scale:{start:.7,end:0},tint:16711935,blendMode:"ADD",lifespan:250,rotate:{min:-180,max:180},emitting:!1}),u=e.add.particles(0,0,"spark",{speed:{min:0,max:250},angle:{min:0,max:360},scale:{start:1.5,end:0},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Quadratic.InOut},tint:33929,blendMode:"ADD",lifespan:400,rotate:{min:-180,max:180},emitting:!1});e.tweens.add({targets:d,x:-1,y:.25,yoyo:!0,loop:-1,duration:5e3,ease:"sine.inout"}),e.tweens.add({targets:c,angle:-360,loop:-1,duration:2e3,ease:"linear"}),e.tweens.add({targets:c,alpha:.25,loop:-1,duration:3500,yoyo:!0,ease:"sine.inout"}),null===(a=e.input.keyboard)||void 0===a||a.on("keydown-ENTER",(function(){s.coordinates={x:t.x||0,y:t.y||0};var i=s.coordinates,a=i.x,n=i.y;c.setPosition(a,n),h.explode(100,a,n);try{var r=e.levelName;localStorage.setItem("".concat(Be).concat(r),JSON.stringify(s.coordinates))}catch(o){}})),null===(n=e.input.keyboard)||void 0===n||n.on("keydown-SPACE",(function(){var e=s.coordinates,i=e.x,a=e.y;t&&(t.x=i,t.y=a),u.explode(300,i,a)}))}},{key:"update",value:function(e,t,i){this.control(t,e,i),this.resetBlockMove(e),this.controlPlayerBody(t),this.smoothMoveCameraTowards(this.playerBody,.9);var a=this.playerVisual,n=a.x,s=a.y;this.playerWhite.setPosition(n,s)}},{key:"controlPlayerBody",value:function(e){this.playerVisual.x=this.playerBody.x,this.playerVisual.y=this.playerBody.y,this.playerBody.body.velocity.x&&(this.playerVisual.angle+=.003*e*this.playerBody.body.velocity.x)}},{key:"control",value:function(e,t,i){var a,n,s,r=ae,o=ne,l=se,c=le,d=ce,h=re,u=oe,p=ue,v=this.playerBody.body.velocity,y=v.x;!(null===(a=this.cursors)||void 0===a?void 0:a.left.isDown)||this.playerParamsConfig.blockMove.left.blocked||i?!(null===(n=this.cursors)||void 0===n?void 0:n.right.isDown)||this.playerParamsConfig.blockMove.right.blocked||i?this.playerBody.body.blocked.down&&(v.x>u?v.x-=2*e:v.x<-u?v.x+=2*e:v.x=0):this.playerBody.body.blocked.none?v.x+=l:0===y?v.x=o:y<0?v.x=-1*y:v.x<r?v.x+=p(e):v.x>=r&&(v.x=r):this.playerBody.body.blocked.none?v.x-=l:0===y?v.x=-o:y>0?v.x=-1*y:v.x>-1*r?v.x-=p(e):v.x>=-1*r&&(v.x=-1*r),(null===(s=this.cursors)||void 0===s?void 0:s.up.isDown)&&!i&&(this.playerBody.body.blocked.left?(this.setBlockMove("left",t),this.playerBody.setVelocityX(Math.max(c,y)),this.playerBody.setVelocityY(-d)):this.playerBody.body.blocked.right?(this.setBlockMove("right",t),this.playerBody.setVelocityX(Math.min(-c,y)),this.playerBody.setVelocityY(-d)):this.playerBody.body.blocked.down&&this.playerBody.setVelocityY(-h))}},{key:"setBlockMove",value:function(e,t){var i=this.playerParamsConfig.blockMove;i[e].blocked=!0,i[e].time=t}},{key:"resetBlockMove",value:function(e){var t=de,i=this.playerParamsConfig.blockMove,a=i.left,n=i.right,s=e-a.time>t,r=e-n.time>t;s&&(a.blocked=!1),r&&(n.blocked=!1)}}]),e}(),Ne=function(){function e(t,i,a){Object(P.a)(this,e),this.scene=void 0,this.extensions=void 0,this.wrapper=void 0,this.tweens=void 0,this.activeDialog=null,this.sceneDialogs=void 0,this.sceneId=void 0,this.sceneId=a,this.sceneDialogs=i,this.scene=t,this.extensions=t.extensions;var n=t.game.config,s=n.width,r=(n.height,Number(s)),o=t.add.sprite(0,0,"dialogLeft").setOrigin(0,0),l=t.add.sprite(r,0,"dialogRight").setOrigin(0,0);l.setPosition(l.x-l.width,l.y);var c=ye.buttons,d=t.add.sprite(r-c.margin.right,c.margin.top,"dialogNextButton").setInteractive().setScrollFactor(0).setOrigin(1,0),h=t.add.sprite(r-c.margin.right,2*c.margin.top+c.height,"dialogSkipButton").setInteractive().setScrollFactor(0).setOrigin(1,0),u=this.nextDialog,p=this.dialogEnd,v=u.bind(this),y=p.bind(this,!0);d.on("pointerup",v),h.on("pointerup",y);var g=t.add.tileSprite(o.width,0,r-o.width-l.width,l.height,"dialogCenter").setOrigin(0,0);this.wrapper=t.add.container(0,0).add([o,l,g,d,h]).setScrollFactor(0).setPosition(0,-g.height);var f=t.tweens.create({targets:this.wrapper,y:-g.height,ease:"Quad.easeInOut",repeat:0,duration:pe}),b=t.tweens.create({targets:this.wrapper,y:0,ease:"Quad.easeInOut",repeat:0,duration:pe});this.tweens={hide:f,show:b},this.createDialogTriggers(t.map)}return Object(I.a)(e,[{key:"tweensPlay",value:function(e,t){var i;i=Array.isArray(e)?e[0]:e,t&&i.once("complete",(function(){t&&t()})),i.play()}},{key:"showDialog",value:function(e){this.activeDialog&&(this.activeDialog.isActive=!0),this.tweensPlay(this.tweens.show,e)}},{key:"hideDialog",value:function(e){this.activeDialog&&(this.activeDialog.isActive=!1),this.tweensPlay(this.tweens.hide,e)}},{key:"createConversation",value:function(e){var t=this.sceneDialogs[e];if(t){this.activeDialog={dialog:t,replica:0,id:e,objects:{}};var i=t[0],a=i.name,n=i.portrait,s=i.replica;this.createPortrait(n),this.createName(a),this.createText(s),this.showDialog()}}},{key:"createPortrait",value:function(e){var t=ve,i=t.height,a=t.width,n=t.y,s=this.wrapper.list[0],r=this.scene.add.image(s.width||25,n,e).setOrigin(0);this.extensions.imgFit(r,a,i),this.wrapper.add(r),this.activeDialog&&(this.activeDialog.objects.portrait=r)}},{key:"createName",value:function(e){var t=ve,i=t.height,a=t.width,n=this.scene.make.text({x:0,y:0,text:e,origin:{x:.5,y:0},style:{font:"25px Arial",color:ye.colors.names,wordWrap:{width:a,useAdvancedWrap:!0}}});n.x=25+a/2,n.y=i+30,this.wrapper.add(n),this.activeDialog&&(this.activeDialog.objects.name=n)}},{key:"createText",value:function(e){var t=ve,i=t.y,a=t.width,n=ye,s=n.buttons,r=n.colors,o=this.scene.make.text({x:a+50,y:2*i,text:e,origin:{x:0,y:0},style:{font:"bold 25px Arial",color:r.text,wordWrap:{width:Number(this.scene.game.config.width)-100-a-s.width,useAdvancedWrap:!0}}});this.wrapper.add(o),this.activeDialog&&(this.activeDialog.objects.text=o)}},{key:"clearDialog",value:function(){if(this.activeDialog){var e,t,i,a=this.activeDialog.objects;null===(e=a.name)||void 0===e||e.destroy(),null===(t=a.portrait)||void 0===t||t.destroy(),null===(i=a.text)||void 0===i||i.destroy()}}},{key:"nextDialog",value:function(){if(this.activeDialog){var e=this.activeDialog,t=e.dialog,i=e.replica+1;if(i<t.length){var a=t[i],n=a.name,s=a.portrait,r=a.replica;this.clearDialog(),this.createPortrait(s),this.createName(n),this.createText(r),this.activeDialog.replica=i}else this.dialogEnd()}}},{key:"dialogEnd",value:function(e){if(this.activeDialog){var t=this.activeDialog,i=t.dialog,a=t.replica,n=t.id,s=i[a]||i[i.length-1];if(s.callback&&s.callback(),this.closeDialog(),e&&(n||0===n)){var r=JSON.parse(localStorage.getItem("ignoredDialogs")||"[]"),o=r[this.sceneId]||[];o.push(n);var l=Object($.a)(new Set(o));r[this.sceneId]=l,localStorage.setItem("ignoredDialogs",JSON.stringify(r))}}}},{key:"closeDialog",value:function(){var e=this.clearDialog;this.hideDialog(e.bind(this))}},{key:"createTrigger",value:function(e,t,i,a){var n=ye.triggerDebug;return this.scene.extensions.createRectangle(e,t,i,a,65280,n?.3:0)}},{key:"createDialogTriggers",value:function(e){var t=this;if(e){var i=e.getObjectLayer("dialogs"),a=null===i||void 0===i?void 0:i.objects;null===a||void 0===a||a.forEach((function(e){var i,a=e.x,n=void 0===a?-100:a,s=e.y,r=void 0===s?-100:s,o=e.width,l=void 0===o?32:o,c=e.height,d=void 0===c?32:c,h=e.properties,u=Number(null===(i=h.find((function(e){return"id"===e.name})))||void 0===i?void 0:i.value),p=t.scene.add.zone(n,r,l,d).setOrigin(0);t.scene.physics.world.enable(p),p.body.setAllowGravity(!1),p.body.moves=!1;var v=t.scene.player;(null===v||void 0===v?void 0:v.playerBody)&&t.scene.physics.add.overlap(v.playerBody,p,(function(){t.createConversation(u),p.destroy()}))}))}}}]),e}(),Ae=i(7),Te=function(){function e(t){Object(P.a)(this,e),this.scene=void 0,this.scene=t}return Object(I.a)(e,[{key:"imgFit",value:function(e,t,i){var a=t/e.width,n=i/e.height,s=Math.min(a,n,1);e.setScale(s)}},{key:"createRectangle",value:function(e,t,i,a,n,s){return this.scene.add.graphics().fillStyle(n,s).fillRect(e,t,i,a)}},{key:"getPropsFromObject",value:function(e){return e.reduce((function(e,t){var i=t.name,a=t.value;return Object(f.a)(Object(f.a)({},e),{},Object(Ae.a)({},i,a))}),{})}},{key:"findCorners",value:function(e){var t=Math.min.apply(null,e.reduce((function(e,t){var i=t.x;return e.push(i),e}),[])),i=Math.min.apply(null,e.reduce((function(e,t){var i=t.y;return e.push(i),e}),[])),a=Math.max.apply(null,e.reduce((function(e,t){var i=t.x,a=t.width;return e.push(i+a),e}),[])),n=Math.max.apply(null,e.reduce((function(e,t){var i=t.y,a=t.height;return e.push(i+a),e}),[])),s=Math.max.apply(null,e.reduce((function(e,t){var i=t.y;return e.push(i),e}),[]));return{x:t,y:s,rectWidth:a-t,rectHeight:n-i}}}]),e}(),Ce=w("setVelocity"),Ee=ge.animation,Pe=Ee.duration,Ie=Ee.ease,Ge=function(){function e(t){var i;Object(P.a)(this,e),this.scene=void 0,this.state={},this.overlap=!1,this.invincible=!1,this.scene=t;var a=t.map,n=null===(i=t.player)||void 0===i?void 0:i.playerBody;a&&n&&(this.createButtons(t,a,n),this.createWalls(t,a,n),this.createCoins(t,a,n),this.createTraps(t,a,n),this.createFinish(t,a,n))}return Object(I.a)(e,[{key:"createButtons",value:function(e,t,i){var a=this,n=t.getObjectLayer("buttons"),s=null===n||void 0===n?void 0:n.objects,r=e.textures.get("button").getFrameNames(),o=Object(l.a)(r,2),c=o[0],d=o[1];null===s||void 0===s||s.forEach((function(n,s){var r=n.x,o=void 0===r?-100:r,l=n.y,h=void 0===l?-100:l,u=n.width,p=void 0===u?-100:u,v=n.height,y=void 0===v?-100:v,g=n.properties,f=e.extensions.getPropsFromObject(g),b=o+p/2,m=h+y,j=f.invisible?null:e.add.sprite(b,m,"button",c).setOrigin(.5,1),O=e.add.zone(o,h,p,y).setOrigin(0,0);e.physics.world.enable(O,Phaser.Physics.Arcade.STATIC_BODY),Ce(O)&&O.setAllowGravity(!1),e.physics.add.overlap(i,O,(function(){var n=f.key,s=z.getters.keys().find((function(e){return e===n}));n&&!s||(a.overlap=!0,setTimeout((function(){a.overlap=!1}),5),null===j||void 0===j||j.setTexture("button",d),f.is_wall?a.activateWall(e,t,i,f.id):a.activateBridge(e,t,i,f.id),O.destroy())}))}))}},{key:"createFinish",value:function(e,t,i){var a=t.getObjectLayer("finish"),n=null===a||void 0===a?void 0:a.objects,s=e.textures.get("finish").getFrameNames();null===n||void 0===n||n.forEach((function(t){var a=t.x,n=void 0===a?-100:a,r=t.y,o=void 0===r?-100:r,l=t.width,c=void 0===l?-100:l,d=t.height,h=void 0===d?-100:d,u=t.properties,p=e.extensions.getPropsFromObject(u),v=e.add.tileSprite(n,o,c,h,"buttons",s[0]).setOrigin(0,1);e.physics.world.enable(v),Ce(v.body)&&v.body.setAllowGravity(!1),e.physics.add.overlap(i,v,(function(){var e=p.nextLevelId;z.setters.onFinish(e)}))}))}},{key:"createCoins",value:function(e,t,i){var a=this;e.anims.create({key:"coinAnimation",frames:"coin",frameRate:10,repeat:-1});var n=e.add.particles(0,0,"spark",{speed:{min:0,max:80},angle:{min:0,max:360},scale:{start:.5,end:0},alpha:{start:0,end:1},blendMode:"ADD",lifespan:500,rotate:{min:-180,max:180},emitting:!1}),s=t.getObjectLayer("coins");null===s||void 0===s||s.objects.map((function(t){var s=t.x,r=void 0===s?0:s,o=t.y,l=void 0===o?0:o,c=(t.width,t.height,e.add.sprite(r,l,"coin",0).setOrigin(0,1));c.play("coinAnimation"),a.scene.physics.world.enable(c,Phaser.Physics.Arcade.STATIC_BODY),e.physics.add.overlap(i,c,(function(){a.overlap=!0,setTimeout((function(){a.overlap=!1}),5);var e=c.x,t=c.y,i=c.width,s=c.height;n.explode(100,e+i/2,t-s/2),c.destroy(),z.addCoin()}))}))}},{key:"createWalls",value:function(e,t,i){var a=this,n=t.getObjectLayer("walls"),s=null===n||void 0===n?void 0:n.objects,r=e.textures.get("bridges").getFrameNames(),o={};null===s||void 0===s||s.forEach((function(t,i){var a=t.x,n=void 0===a?-100:a,s=t.y,l=void 0===s?-100:s,c=t.width,d=void 0===c?0:c,h=t.height,u=void 0===h?0:h,p=t.properties,v=e.extensions.getPropsFromObject(p);if(void 0!==v.id){var y=e.add.tileSprite(n,l+u,d,u,"bridges",r[0]).setOrigin(0,1);o[v.id]||(o[v.id]=[]),o[v.id].push({props:v,sprite:y})}})),Object.entries(o).forEach((function(t){var n=Object(l.a)(t,2),s=n[0],r=n[1],o=e.extensions.findCorners(r.map((function(e){return e.sprite}))),c=o.x,d=o.y,h=o.rectWidth,u=o.rectHeight,p=e.add.zone(c,d,h,u).setOrigin(0,1);a.scene.physics.world.enable(p,Phaser.Physics.Arcade.STATIC_BODY),Ce(p.body)&&(p.body.setAllowGravity(!1).setImmovable().setFriction(0,0),p.body.moves=!1),e.physics.add.collider(i,p,(function(){})),a.state[s]={body:p,bridges:r}}))}},{key:"activateBridge",value:function(e,t,i,a){var n=this;if(void 0!==a){var s=t.getObjectLayer("bridges"),r=null===s||void 0===s?void 0:s.objects,o=e.textures.get("bridges").getFrameNames(),l=Number(t.heightInPixels),c=[];null===r||void 0===r||r.forEach((function(t,i){var n=t.x,s=void 0===n?-100:n,r=t.y,d=void 0===r?-100:r,h=t.width,u=void 0===h?0:h,p=t.height,v=void 0===p?0:p,y=t.properties,g=e.extensions.getPropsFromObject(y);if(g.id===a){var b=g.from_top?2*-v:l+2*v,m=e.add.tileSprite(s,b,u,v,"bridges",o[0]).setOrigin(0,0);c.push(Object(f.a)(Object(f.a)({},m),{},{y:d}));e.tweens.add({targets:m,y:d,ease:Ie,duration:Pe,repeat:0})}})),setTimeout((function(){var t=e.extensions.findCorners(c),a=t.x,s=t.y,r=t.rectWidth,o=t.rectHeight,l=e.add.zone(a,s,r,o).setOrigin(0,0);n.scene.physics.world.enable(l,Phaser.Physics.Arcade.STATIC_BODY),Ce(l.body)&&(l.body.setAllowGravity(!1).setImmovable().setFriction(0,0),l.body.moves=!1),e.physics.add.collider(i,l,(function(){}))}),Pe)}}},{key:"activateWall",value:function(e,t,i,a){if(a){var n=Number(t.heightInPixels),s=this.state[a],r=s.body,o=s.bridges;r.destroy(),o.forEach((function(t){var i=t.props,a=t.sprite,s=i.from_top?-(a.height+100):Number(n)+a.height+100;e.tweens.add({targets:a,y:s,ease:Ie,duration:Pe,repeat:0})}))}}},{key:"createTraps",value:function(e,t,i){var a=this,n=t.getObjectLayer("traps"),s=null===n||void 0===n?void 0:n.objects;null===s||void 0===s||s.forEach((function(t){var n=t.x,s=void 0===n?-100:n,r=t.y,o=void 0===r?-100:r,l=t.width,c=void 0===l?0:l,d=t.height,h=void 0===d?0:d,u=e.add.zone(s,o,c,h).setOrigin(0,0);e.physics.world.enable(u,Phaser.Physics.Arcade.STATIC_BODY),e.physics.add.overlap(i,u,(function(){if(i.setAlpha(0),!a.invincible){var t;a.invincible=!0;var n=e.player,s=null===(t=e.player)||void 0===t?void 0:t.playerWhite;if(!s||!n)return;n.HP-=10,n.HP<=0&&e.dead(),s.setAlpha(1);var r=0,o=setInterval((function(){var e=1===s.alpha?0:1;s.setAlpha(e),++r>=5&&(clearTimeout(o),a.invincible=!1)}),100)}}))}))}}]),e}(),He=5,Se=5,Le=16,Je=100,Ye=function(){function e(t){var i,a=this;Object(P.a)(this,e),this.scene=void 0,this.hpBar=void 0,this.hitId=null,this.hitTween=void 0,this.prevHpValue=100,this.update=function(){var e;a.scene.player&&(null===(e=a.scene.player)||void 0===e?void 0:e.HP)!==a.prevHpValue&&a.hit()},this.scene=t,this.prevHpValue=(null===(i=t.player)||void 0===i?void 0:i.HP)||100,this.createHPBar()}return Object(I.a)(e,[{key:"createHPBar",value:function(){var e=Je,t=Le,i=He,a=Se,n=this.scene.add.graphics().fillStyle(16777215).fillRect(0,0,t,e);n.generateTexture("hpLine",t,e),n.destroy(),this.hpBar=this.scene.add.sprite(i,a,"hpLine").setTint(16711680).setOrigin(0,0).setScrollFactor(0)}},{key:"hit",value:function(){var e=this,t=0;if(null===this.hitId){var i=this.scene.player.HP;this.hitId=setInterval((function(){var a,n,s=!!(t%2);(t++,null===(a=e.hpBar)||void 0===a||a.setTint(s?16777215:16711680),t>=10)&&(null===(n=e.hpBar)||void 0===n||n.setTint(16711680),clearInterval(e.hitId),e.hitId=null,e.prevHpValue=i)}),50);var a=i/z.getters.hp();console.log("\ud83d\ude80 ~ GameInterface ~ hit ~ percent:",a,i,z.getters.hp());this.scene.tweens.add({targets:this.hpBar,scaleY:a,ease:"linear",duration:300})}}}]),e}(),Re=function(e){Object(K.a)(i,e);var t=Object(q.a)(i);function i(e){var a;return Object(P.a)(this,i),(a=t.call(this,{key:e})).player=null,a.dialog=null,a.level=null,a.interface=null,a.extensions=void 0,a.map=null,a.world=null,a.visual=null,a.levelName=void 0,a.restart=!1,a.levelName=e,a}return Object(I.a)(i,[{key:"preload",value:function(){this.extensions=new Te(this),be.call(this,Object(f.a)(Object(f.a)({},ke),{},{tilemapTiledJSON:[].concat(Object($.a)(ke.tilemapTiledJSON),[["map",Oe+"levels/".concat(this.levelName,".json")]])}))}},{key:"create",value:function(){var e=this;this.map=this.make.tilemap({key:"map"}),console.log("\ud83d\ude80 ~ DefaultScene ~ create ~ this.map:",this.map);var t=we.map((function(t){var i;return null===(i=e.map)||void 0===i?void 0:i.addTilesetImage(t,t)})).filter((function(e){return!!e}));if(!t.length)throw"wrong tileset data: ".concat(JSON.stringify(t));this.world=this.map.createLayer("level",t,0,0),this.visual=this.map.createLayer("visual",t,0,0),this.player=new De(this),this.dialog=new Ne(this,je,0),this.level=new Ge(this),this.interface=new Ye(this)}},{key:"dead",value:function(){var e=this;this.restart||(this.restart=!0,this.tweens.add({targets:this.cameras.main,alpha:0,duration:500,onComplete:function(){setTimeout((function(){e.restart=!1,e.scene.restart()}),500)}}))}},{key:"update",value:function(e,t){var i,a,n,s,r;null===(i=this.player)||void 0===i||i.update(e,t,(null===(a=this.dialog)||void 0===a||null===(n=a.activeDialog)||void 0===n?void 0:n.isActive)||(null===(s=this.level)||void 0===s?void 0:s.overlap)||this.restart),null===(r=this.interface)||void 0===r||r.update()}}]),i}(ee.Scene),_e=[{level:function(e){Object(K.a)(i,e);var t=Object(q.a)(i);function i(){return Object(P.a)(this,i),t.call(this,"ex_0")}return i}(Re),name:"0",doors:1,isAvailable:!0,id:"0"},{level:function(e){Object(K.a)(i,e);var t=Object(q.a)(i);function i(){return Object(P.a)(this,i),t.call(this,"ex_1")}return i}(Re),name:"1",doors:1,id:"1"},{level:function(e){Object(K.a)(i,e);var t=Object(q.a)(i);function i(){return Object(P.a)(this,i),t.call(this,"ex_2")}return i}(Re),name:"2",doors:2,id:"2"},{level:function(e){Object(K.a)(i,e);var t=Object(q.a)(i);function i(){return Object(P.a)(this,i),t.call(this,"ex_3")}return i}(Re),name:"3",doors:3,id:"3"}];try{var Fe=localStorage.getItem(J);if(Fe){var Me=JSON.parse(Fe).reduce((function(e,t){var i=t.name,a=t.isAvailable;return e[i]=!!a,e}),{});_e.forEach((function(e){Me[e.name]&&(e.isAvailable=Me[e.name])}))}}catch(xt){console.error("2",xt)}var ze,We=_e,Qe=i(31),Ve=i.n(Qe),Ze=function(e){var t=e.children,i=e.isOpen,a=e.onClose;return i?Object(p.jsxs)("div",{className:Ve.a.dialog,children:[Object(p.jsx)("div",{className:Ve.a.curtain,onClick:a}),t]}):null},Xe=["title","titleId"];function Ue(){return Ue=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Ue.apply(this,arguments)}function Ke(e,t){if(null==e)return{};var i,a,n=function(e,t){if(null==e)return{};var i,a,n={},s=Object.keys(e);for(a=0;a<s.length;a++)i=s[a],t.indexOf(i)>=0||(n[i]=e[i]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function qe(e,t){var i=e.title,n=e.titleId,s=Ke(e,Xe);return a.createElement("svg",Ue({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",ref:t,"aria-labelledby":n},s),i?a.createElement("title",{id:n},i):null,ze||(ze=a.createElement("g",{fill:"none",fillRule:"evenodd"},a.createElement("path",{d:"M24 0v24H0V0zM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035c-.01-.004-.019-.001-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427c-.002-.01-.009-.017-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093c.012.004.023 0 .029-.008l.004-.014l-.034-.614c-.003-.012-.01-.02-.02-.022m-.715.002a.023.023 0 0 0-.027.006l-.006.014l-.034.614c0 .012.007.02.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z"}),a.createElement("path",{fill:"currentColor",d:"m12 14.122l5.303 5.303a1.5 1.5 0 0 0 2.122-2.122L14.12 12l5.304-5.303a1.5 1.5 0 1 0-2.122-2.121L12 9.879L6.697 4.576a1.5 1.5 0 1 0-2.122 2.12L9.88 12l-5.304 5.304a1.5 1.5 0 1 0 2.122 2.12z"}))))}var $e,et,tt=a.forwardRef(qe),it=(i.p,["title","titleId"]);function at(){return at=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},at.apply(this,arguments)}function nt(e,t){if(null==e)return{};var i,a,n=function(e,t){if(null==e)return{};var i,a,n={},s=Object.keys(e);for(a=0;a<s.length;a++)i=s[a],t.indexOf(i)>=0||(n[i]=e[i]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function st(e,t){var i=e.title,n=e.titleId,s=nt(e,it);return a.createElement("svg",at({width:163,height:163,viewBox:"0 0 163 163",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},s),i?a.createElement("title",{id:n},i):null,$e||($e=a.createElement("g",{filter:"url(#filter0_d_3_168)"},a.createElement("circle",{cx:76.5,cy:76.5,r:75.5,fill:"#89B8AE"}),a.createElement("path",{d:"M102.3 61.563C112.994 67.9355 113.437 83.2622 103.13 90.2425L79.5289 106.226C68.4242 113.746 53.3916 106.048 53.0036 92.6416L52.1187 62.0669C51.7307 48.661 66.293 40.106 77.8141 46.9715L102.3 61.563Z",fill:"white"}))),et||(et=a.createElement("defs",null,a.createElement("filter",{id:"filter0_d_3_168",x:0,y:0,width:163,height:163,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},a.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),a.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),a.createElement("feOffset",{dx:5,dy:5}),a.createElement("feGaussianBlur",{stdDeviation:3}),a.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),a.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.61 0"}),a.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3_168"}),a.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3_168",result:"shape"})))))}var rt=a.forwardRef(st),ot=(i.p,i(14)),lt=i.n(ot),ct=function(e){var t=e.onClose,i=e.levelId,a=e.doors,n=e.onPlay;return Object(p.jsxs)("div",{className:lt.a.root,children:[Object(p.jsx)("div",{className:lt.a.header,children:Object(p.jsxs)("div",{className:lt.a.headerContent,children:[Object(p.jsx)("button",{className:lt.a.close,onClick:t,children:Object(p.jsx)(tt,{})}),Object(p.jsxs)("span",{className:lt.a.levelName,children:["\u0420\u0456\u0432\u0435\u043d\u044c: ",i]})]})}),Object(p.jsxs)("div",{className:lt.a.menu,children:[Object(p.jsxs)("div",{className:lt.a.top,children:["\u041f\u0435\u0440\u0435\u0445\u043e\u0434\u0438: ",a]}),Object(p.jsx)("button",{className:lt.a.playBtn,onClick:n,children:Object(p.jsx)(rt,{className:lt.a.playIcon})})]})]})},dt=!!localStorage.getItem("debug"),ht={type:te.a.AUTO,parent:"game-box",height:720,width:1280,backgroundColor:1310779,physics:{default:"arcade",arcade:{gravity:{y:ie},debug:dt}},pixelArt:!0,roundPixels:!0},ut=i(32),pt=i.n(ut),vt=function(e){var t=e.level;return Object(a.useLayoutEffect)((function(){var e=function(e){var t=Object(f.a)(Object(f.a)({},ht),{},{scene:e});return new te.a.Game(t)}(t.level);return function(){e.destroy(!0)}}),[t]),Object(p.jsx)("div",{className:pt.a.root,children:Object(p.jsx)("div",{className:pt.a.game,id:"game-box"})})},yt={"/":{data:{component:W}},play:{data:{component:function(e){Object(g.a)(e);var t=Object(a.useState)(We),i=Object(l.a)(t,2),n=i[0],s=i[1],r=Object(a.useState)(null),o=Object(l.a)(r,2),d=o[0],h=o[1],u=Object(a.useState)(null),v=Object(l.a)(u,2),y=v[0],f=v[1],b=Object(a.useState)(-1),m=Object(l.a)(b,2),j=m[0],O=m[1],x=function(){h(null)};return Object(a.useEffect)((function(){var e=z.listeners.onFinish((function(e){var t="",i=We.map((function(i){return i.id===e&&(i.isAvailable=!0,t=i.id),i}));try{localStorage.setItem(J,JSON.stringify(i))}catch(xt){console.error("1",xt)}s(i),t&&O(t),f(null)}));return function(){e()}}),[]),Object(p.jsxs)(Z,{children:[Object(p.jsx)("div",{className:U.a.root,children:Object(p.jsx)("div",{className:U.a.levels,children:n.map((function(e){e.level;var t=e.name,i=e.id,a=e.isAvailable;return Object(p.jsx)("button",{className:Object(c.a)(U.a.button,!a&&U.a.disabled,i===j&&U.a.show),onClick:function(){h(e)},onAnimationEnd:function(){i===j&&h(e)},children:t},t+i)}))})}),Object(p.jsx)(Ze,{isOpen:!!d,onClose:x,children:Object(p.jsx)(ct,{onClose:x,levelId:(null===d||void 0===d?void 0:d.name)||"",doors:1,onPlay:function(){f(d),x()}})}),Object(p.jsx)(Ze,{isOpen:!!y,onClose:function(){},children:Object(p.jsx)(vt,{level:y})})]})}}},shop:{data:{component:W}},"*":{data:{component:W}}},gt=function(){var e=[];return function t(i,a){Object.entries(i).forEach((function(i){var n,s=Object(l.a)(i,2),r=s[0],o=s[1];if(o.data&&e.push({pathName:a+r,data:Object(f.a)({},o.data)}),n=o,0!==Object.keys(n).length&&!o.component&&!o.redirect){var c=a+r;t(o,c+("/"!==c[c.length-1]?"/":""))}}))}(yt,""),{pages:e}}().pages,ft=function(e){Object(g.a)(e);var t=x().page;return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(b.d,{location:t.path,children:gt.map((function(e,t){var i=e.pathName,a=e.data,n=a.component,s=a.redirect,r=!n||s;return Object(p.jsx)(b.b,{path:i,element:r?Object(p.jsx)(b.a,{to:s||"/"}):Object(p.jsx)(n,{})},"routes/".concat(i,"_").concat(t))}))})})},bt=function(e){return Object(g.a)(e),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(O,{children:Object(p.jsx)(ft,{})})})},mt=i(35),jt=i.n(mt);var Ot=function(){return Object(p.jsx)(o.a,{children:Object(p.jsxs)("div",{className:jt.a.root,children:[Object(p.jsx)(y,{}),Object(p.jsx)(bt,{})]})})};i(45);r.a.render(Object(p.jsx)(Ot,{}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.9d45af52.chunk.js.map